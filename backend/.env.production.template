# MedFlow Production Environment Configuration
# =============================================
# SECURITY WARNING: Copy this file to .env and fill in real values.
# NEVER commit the actual .env file to version control.
#
# Generate secure secrets with:
#   node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"

# =====================================================
# SERVER CONFIGURATION
# =====================================================
NODE_ENV=production
PORT=5001
FRONTEND_URL=https://your-production-domain.com

# =====================================================
# DATABASE (REQUIRED)
# =====================================================
# Use a secure connection string with authentication
MONGODB_URI=mongodb://username:password@host:27017/medflow?authSource=admin&replicaSet=rs0

# =====================================================
# AUTHENTICATION SECRETS (REQUIRED - GENERATE SECURE VALUES!)
# =====================================================
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=REPLACE_WITH_64_CHAR_HEX_SECRET
# CRITICAL: REFRESH_TOKEN_SECRET must be DIFFERENT from JWT_SECRET
# This prevents refresh tokens from being used as access tokens
REFRESH_TOKEN_SECRET=REPLACE_WITH_DIFFERENT_64_CHAR_HEX_SECRET
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d
SESSION_SECRET=REPLACE_WITH_64_CHAR_HEX_SECRET

# =====================================================
# ENCRYPTION KEYS (REQUIRED FOR PRODUCTION)
# =====================================================
# These protect sensitive data. Generate unique 64-char hex strings for each.
CALENDAR_ENCRYPTION_KEY=REPLACE_WITH_64_CHAR_HEX_SECRET
LIS_ENCRYPTION_KEY=REPLACE_WITH_64_CHAR_HEX_SECRET
BACKUP_ENCRYPTION_KEY=REPLACE_WITH_64_CHAR_HEX_SECRET

# =====================================================
# HEALTH ENDPOINT PROTECTION
# =====================================================
# Required in production - protects /api/health/detailed
HEALTH_API_KEY=REPLACE_WITH_32_CHAR_SECRET

# =====================================================
# REDIS (REQUIRED for rate limiting and distributed locks)
# =====================================================
REDIS_URL=redis://localhost:6379
# For password-protected Redis:
# REDIS_URL=redis://:password@host:6379

# =====================================================
# EMAIL CONFIGURATION (Required for notifications)
# =====================================================
EMAIL_HOST=smtp.your-provider.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your-email@domain.com
EMAIL_PASS=your-email-password
EMAIL_FROM=MedFlow <noreply@your-domain.com>

# =====================================================
# BACKUP CONFIGURATION (Critical for data protection)
# =====================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=/var/backups/medflow
BACKUP_CLOUD_ENABLED=false
# For cloud backup (AWS S3):
# AWS_ACCESS_KEY_ID=your-aws-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret
# AWS_BACKUP_BUCKET=medflow-backups
# AWS_REGION=eu-west-1

# =====================================================
# MOBILE MONEY INTEGRATION (DRC)
# =====================================================
# Set to false for production - enables real payment processing
MOBILE_MONEY_SIMULATION_MODE=false

# Orange Money DRC
ORANGE_MONEY_API_KEY=your-orange-money-api-key
ORANGE_MONEY_MERCHANT_ID=your-merchant-id
ORANGE_MONEY_CALLBACK_URL=https://your-domain.com/api/webhooks/orange-money

# MTN Mobile Money DRC
MTN_MONEY_API_KEY=your-mtn-api-key
MTN_MONEY_MERCHANT_ID=your-merchant-id
MTN_MONEY_CALLBACK_URL=https://your-domain.com/api/webhooks/mtn-money

# =====================================================
# CLINIC CONFIGURATION
# =====================================================
CLINIC_ID=kinshasa-main
CLINIC_NAME=MedFlow Kinshasa
CLINIC_ADDRESS=Avenue de la Paix, Kinshasa
CLINIC_PHONE=+243 XXX XXX XXX
CLINIC_EMAIL=contact@your-clinic.com

# Currency settings for DRC
DEFAULT_CURRENCY=CDF
SUPPORTED_CURRENCIES=CDF,USD

# =====================================================
# MULTI-CLINIC SYNC (Optional)
# =====================================================
SYNC_ENABLED=false
CENTRAL_SYNC_URL=https://central.your-domain.com
SYNC_API_KEY=REPLACE_WITH_SYNC_API_KEY

# =====================================================
# FEATURE FLAGS
# =====================================================
FACE_RECOGNITION_ENABLED=false
OCR_SERVICE_URL=http://localhost:8000
CALENDAR_INTEGRATION_ENABLED=false
LIS_INTEGRATION_ENABLED=false

# =====================================================
# LOGGING
# =====================================================
LOG_LEVEL=info
LOG_FILE=/var/log/medflow/app.log

# =====================================================
# SECURITY
# =====================================================
# Disable CSRF only for testing - never in production
# DISABLE_CSRF=false

# Internal API key for service-to-service communication
INTERNAL_API_KEY=REPLACE_WITH_INTERNAL_API_KEY

# =====================================================
# CHECKLIST BEFORE PRODUCTION DEPLOYMENT
# =====================================================
# [ ] All REPLACE_WITH_* values have been replaced with secure secrets
# [ ] JWT_SECRET is a unique 64+ character random string
# [ ] All encryption keys are unique 64+ character random strings
# [ ] MONGODB_URI uses authentication and SSL if remote
# [ ] REDIS_URL is configured and Redis is running
# [ ] FRONTEND_URL matches your production domain
# [ ] Email configuration is tested and working
# [ ] Backup scheduler is enabled and tested
# [ ] Mobile Money API keys are real (not test keys)
# [ ] All logs are being written to persistent storage
# [ ] SSL/TLS certificates are configured on your reverse proxy
