# =============================================================================
# MedFlow Clinic Configuration Template
# =============================================================================
# Copy this file to .env and configure for your specific clinic
# Each clinic (Kinshasa, Lubumbashi, Goma) needs its own configuration
# =============================================================================

# -----------------------------------------------------------------------------
# CLINIC IDENTIFICATION (REQUIRED)
# -----------------------------------------------------------------------------
# Unique clinic identifier - MUST match the clinicId in the database
# Options: KINSHASA_MAIN, LUBUMBASHI, GOMA, or custom ID
CLINIC_ID=KINSHASA_MAIN

# Human-readable clinic name (for logs and UI)
CLINIC_NAME=Centre Ophtalmologique de Kinshasa

# -----------------------------------------------------------------------------
# SERVER CONFIGURATION
# -----------------------------------------------------------------------------
NODE_ENV=production
PORT=5001

# Frontend URL (for CORS and email links)
FRONTEND_URL=http://localhost:5173

# -----------------------------------------------------------------------------
# LOCAL DATABASE (REQUIRED)
# -----------------------------------------------------------------------------
# Each clinic has its own local MongoDB instance
# Use replica set for change streams (required for real-time sync)
MONGODB_URI=mongodb://127.0.0.1:27017/medflow?replicaSet=rs0

# Redis for caching and rate limiting (optional but recommended)
REDIS_URL=redis://localhost:6379

# -----------------------------------------------------------------------------
# CENTRAL SYNC CONFIGURATION
# -----------------------------------------------------------------------------
# Enable/disable sync with central server
SYNC_ENABLED=true

# Central server URL (cloud server that aggregates all clinic data)
CENTRAL_SYNC_URL=https://central.medflow.cd/api/sync

# API key for authenticating with central server
# Generate with: openssl rand -base64 32
SYNC_API_KEY=your-sync-api-key-here

# Sync interval in milliseconds (default: 60000 = 1 minute)
# Lower values = more real-time but more bandwidth
# Higher values = less bandwidth but more delay
SYNC_INTERVAL=60000

# Batch size for sync operations (default: 50)
SYNC_BATCH_SIZE=50

# Conflict resolution strategy
# Options: last_write_wins, central_wins, local_wins, manual
SYNC_CONFLICT_STRATEGY=last_write_wins

# Maximum retry attempts for failed sync items
SYNC_MAX_RETRIES=5

# -----------------------------------------------------------------------------
# AUTHENTICATION & SECURITY
# -----------------------------------------------------------------------------
# JWT secret for access tokens - MUST be unique per deployment
# Generate with: openssl rand -base64 48
JWT_SECRET=change-this-to-a-strong-secret-in-production

# JWT expiration (short-lived for security)
JWT_EXPIRE=15m

# Refresh token secret (MUST be different from JWT_SECRET)
REFRESH_TOKEN_SECRET=change-this-to-another-strong-secret

# Refresh token expiration
REFRESH_TOKEN_EXPIRE=30d

# Session secret
SESSION_SECRET=your-session-secret-change-in-production

# Encryption key for sensitive data (32 characters)
ENCRYPTION_KEY=your-encryption-key-32-characters!

# -----------------------------------------------------------------------------
# EMAIL CONFIGURATION
# -----------------------------------------------------------------------------
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=your-clinic-email@gmail.com
EMAIL_PASS=your-app-password

# -----------------------------------------------------------------------------
# SMS CONFIGURATION (Optional)
# -----------------------------------------------------------------------------
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890

# -----------------------------------------------------------------------------
# EXTERNAL SERVICES
# -----------------------------------------------------------------------------
# Face Recognition Service (Python microservice)
FACE_SERVICE_URL=http://127.0.0.1:5002

# OCR Service URL
OCR_SERVICE_URL=http://127.0.0.1:5003

# Google Maps API (for patient addresses)
GOOGLE_MAPS_API_KEY=your-google-maps-api-key

# OpenAI API (for AI features)
OPENAI_API_KEY=your-openai-api-key

# -----------------------------------------------------------------------------
# FILE STORAGE
# -----------------------------------------------------------------------------
MAX_FILE_SIZE=10485760
UPLOAD_PATH=./uploads

# Network shares for medical devices (configured per clinic)
# These paths should point to your local network shares
# NETWORK_SHARE_OCT=//192.168.1.100/oct_images
# NETWORK_SHARE_REFRACTION=//192.168.1.101/refraction_data

# -----------------------------------------------------------------------------
# BACKUP CONFIGURATION
# -----------------------------------------------------------------------------
BACKUP_SCHEDULE=0 2 * * *
BACKUP_PATH=./backups

# -----------------------------------------------------------------------------
# LOGGING
# -----------------------------------------------------------------------------
LOG_LEVEL=info
LOG_PATH=./logs
