<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MedFlow - Complete Workflow Interconnections</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #0f172a; color: #e2e8f0; line-height: 1.6; }

    .header { background: linear-gradient(135deg, #1e40af 0%, #7c3aed 50%, #db2777 100%); color: white; padding: 40px; text-align: center; }
    .header h1 { font-size: 2.5rem; margin-bottom: 10px; }
    .header p { opacity: 0.9; font-size: 1.2rem; }

    .container { max-width: 1600px; margin: 0 auto; padding: 30px; }

    .section { background: #1e293b; border-radius: 16px; padding: 30px; margin: 30px 0; border: 1px solid #334155; }
    .section h2 { color: #60a5fa; font-size: 1.5rem; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; }
    .section h2::before { content: ''; width: 4px; height: 24px; background: linear-gradient(180deg, #60a5fa, #a78bfa); border-radius: 2px; }

    .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
    .stat-card { background: linear-gradient(135deg, #1e3a5f 0%, #1e293b 100%); padding: 20px; border-radius: 12px; text-align: center; border: 1px solid #3b82f6; }
    .stat-value { font-size: 2rem; font-weight: bold; color: #60a5fa; }
    .stat-label { color: #94a3b8; font-size: 0.9rem; }

    svg { max-width: 100%; height: auto; display: block; margin: 20px auto; }

    .workflow-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px; }
    .workflow-card { background: #0f172a; border-radius: 12px; padding: 20px; border: 1px solid #334155; }
    .workflow-card h3 { color: #f472b6; font-size: 1.1rem; margin-bottom: 15px; }
    .workflow-card ul { list-style: none; }
    .workflow-card li { padding: 8px 0; border-bottom: 1px solid #1e293b; display: flex; align-items: center; gap: 10px; }
    .workflow-card li:last-child { border-bottom: none; }
    .workflow-card li::before { content: ''; width: 8px; height: 8px; background: #4ade80; border-radius: 50%; }

    .connection-line { stroke: #64748b; stroke-width: 2; fill: none; }
    .connection-arrow { fill: #64748b; }

    .legend { display: flex; flex-wrap: wrap; gap: 20px; margin-top: 20px; padding: 15px; background: #0f172a; border-radius: 8px; }
    .legend-item { display: flex; align-items: center; gap: 8px; }
    .legend-color { width: 16px; height: 16px; border-radius: 4px; }

    .module-table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    .module-table th, .module-table td { padding: 12px 15px; text-align: left; border-bottom: 1px solid #334155; }
    .module-table th { background: #1e3a5f; color: #60a5fa; }
    .module-table tr:hover { background: #1e3a5f; }

    .badge { display: inline-block; padding: 4px 10px; border-radius: 12px; font-size: 0.75rem; font-weight: 600; }
    .badge-core { background: #3b82f6; color: white; }
    .badge-clinical { background: #10b981; color: white; }
    .badge-financial { background: #f59e0b; color: white; }
    .badge-inventory { background: #8b5cf6; color: white; }
    .badge-admin { background: #6b7280; color: white; }

    .flow-step { display: flex; align-items: center; gap: 15px; margin: 10px 0; }
    .flow-step .step-num { width: 32px; height: 32px; background: #3b82f6; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0; }
    .flow-step .step-content { flex: 1; }
    .flow-step .step-arrow { color: #64748b; font-size: 1.5rem; }
  </style>
</head>
<body>

<div class="header">
  <h1>MedFlow - Complete System Workflow Map</h1>
  <p>Enterprise Ophthalmology Clinic Management System - All Workflows & Interconnections</p>
</div>

<div class="container">

<!-- System Statistics -->
<div class="section">
  <h2>System Overview - Complete Architecture Stats</h2>
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-value">83</div>
      <div class="stat-label">Backend Models</div>
    </div>
    <div class="stat-card">
      <div class="stat-value">77</div>
      <div class="stat-label">API Routes</div>
    </div>
    <div class="stat-card">
      <div class="stat-value">61</div>
      <div class="stat-label">Backend Services</div>
    </div>
    <div class="stat-card">
      <div class="stat-value">60+</div>
      <div class="stat-label">Frontend Pages</div>
    </div>
    <div class="stat-card">
      <div class="stat-value">27</div>
      <div class="stat-label">Workflow Types</div>
    </div>
    <div class="stat-card">
      <div class="stat-value">4</div>
      <div class="stat-label">Clinics (Multi-site)</div>
    </div>
  </div>
</div>

<!-- Master Workflow Diagram -->
<div class="section">
  <h2>Complete Patient Journey - End-to-End Workflow</h2>
  <svg viewBox="0 0 1400 600" style="background: #0f172a; border-radius: 12px;">
    <defs>
      <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
        <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
      </marker>
      <filter id="glow">
        <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
        <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
      </filter>
    </defs>

    <!-- Title -->
    <text x="700" y="30" text-anchor="middle" fill="#e2e8f0" font-size="18" font-weight="bold">Complete Patient Journey Flow</text>

    <!-- Phase Labels -->
    <text x="200" y="70" text-anchor="middle" fill="#60a5fa" font-size="14" font-weight="bold">ENTRY</text>
    <text x="500" y="70" text-anchor="middle" fill="#10b981" font-size="14" font-weight="bold">CLINICAL</text>
    <text x="900" y="70" text-anchor="middle" fill="#f59e0b" font-size="14" font-weight="bold">TREATMENT</text>
    <text x="1200" y="70" text-anchor="middle" fill="#ec4899" font-size="14" font-weight="bold">FINANCIAL</text>

    <!-- Entry Phase -->
    <g filter="url(#glow)">
      <rect x="50" y="100" width="130" height="60" rx="8" fill="#1e40af"/>
      <text x="115" y="125" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Public Booking</text>
      <text x="115" y="145" text-anchor="middle" fill="#93c5fd" font-size="9">/book</text>
    </g>

    <g filter="url(#glow)">
      <rect x="50" y="180" width="130" height="60" rx="8" fill="#1e40af"/>
      <text x="115" y="205" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Walk-in Patient</text>
      <text x="115" y="225" text-anchor="middle" fill="#93c5fd" font-size="9">Reception</text>
    </g>

    <g filter="url(#glow)">
      <rect x="200" y="140" width="140" height="70" rx="8" fill="#3b82f6"/>
      <text x="270" y="165" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Patient</text>
      <text x="270" y="183" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Registration</text>
      <text x="270" y="200" text-anchor="middle" fill="#bfdbfe" font-size="9">5-Step Wizard</text>
    </g>

    <g filter="url(#glow)">
      <rect x="200" y="230" width="140" height="60" rx="8" fill="#2563eb"/>
      <text x="270" y="255" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Queue Check-In</text>
      <text x="270" y="275" text-anchor="middle" fill="#93c5fd" font-size="9">Priority Assignment</text>
    </g>

    <!-- Arrows from Entry to Registration -->
    <path d="M180,130 Q210,120 200,155" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <path d="M180,210 Q210,220 200,200" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <path d="M270,210 L270,230" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>

    <!-- Clinical Phase -->
    <g filter="url(#glow)">
      <rect x="380" y="100" width="140" height="70" rx="8" fill="#059669"/>
      <text x="450" y="125" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Nurse Vitals</text>
      <text x="450" y="145" text-anchor="middle" fill="#6ee7b7" font-size="9">BP, Visual Acuity</text>
      <text x="450" y="160" text-anchor="middle" fill="#6ee7b7" font-size="9">Pre-Exam Tests</text>
    </g>

    <g filter="url(#glow)">
      <rect x="380" y="190" width="140" height="80" rx="8" fill="#10b981"/>
      <text x="450" y="215" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Consultation</text>
      <text x="450" y="235" text-anchor="middle" fill="#a7f3d0" font-size="9">Multi-Step Wizard:</text>
      <text x="450" y="250" text-anchor="middle" fill="#6ee7b7" font-size="9">VA > Refraction > Exam</text>
      <text x="450" y="265" text-anchor="middle" fill="#6ee7b7" font-size="9">> Diagnosis > Summary</text>
    </g>

    <g filter="url(#glow)">
      <rect x="380" y="290" width="140" height="60" rx="8" fill="#047857"/>
      <text x="450" y="315" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Device Data Import</text>
      <text x="450" y="335" text-anchor="middle" fill="#6ee7b7" font-size="9">OCT, Autorefractor...</text>
    </g>

    <g filter="url(#glow)">
      <rect x="550" y="140" width="130" height="60" rx="8" fill="#059669"/>
      <text x="615" y="165" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Laboratory</text>
      <text x="615" y="185" text-anchor="middle" fill="#6ee7b7" font-size="9">Orders > Results</text>
    </g>

    <g filter="url(#glow)">
      <rect x="550" y="220" width="130" height="60" rx="8" fill="#14532d"/>
      <text x="615" y="245" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Imaging</text>
      <text x="615" y="265" text-anchor="middle" fill="#6ee7b7" font-size="9">OCT, Fundus, Fields</text>
    </g>

    <!-- Arrows in Clinical -->
    <path d="M340,175 L380,145" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <path d="M340,260 L380,260" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <path d="M450,170 L450,190" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <path d="M520,230 L550,190" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <path d="M520,230 L550,240" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <path d="M450,290 Q450,285 450,270" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>

    <!-- Treatment Phase -->
    <g filter="url(#glow)">
      <rect x="720" y="90" width="150" height="70" rx="8" fill="#d97706"/>
      <text x="795" y="115" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Prescriptions</text>
      <text x="795" y="135" text-anchor="middle" fill="#fef3c7" font-size="9">Optical Rx + Medications</text>
      <text x="795" y="150" text-anchor="middle" fill="#fde68a" font-size="9">Drug Safety Check</text>
    </g>

    <g filter="url(#glow)">
      <rect x="720" y="180" width="150" height="60" rx="8" fill="#f59e0b"/>
      <text x="795" y="205" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Glasses Order</text>
      <text x="795" y="225" text-anchor="middle" fill="#fef3c7" font-size="9">Frame + Lens Selection</text>
    </g>

    <g filter="url(#glow)">
      <rect x="720" y="260" width="150" height="60" rx="8" fill="#b45309"/>
      <text x="795" y="285" text-anchor="middle" fill="white" font-size="11" font-weight="bold">IVT Injection</text>
      <text x="795" y="305" text-anchor="middle" fill="#fef3c7" font-size="9">Cumulative Dose Track</text>
    </g>

    <g filter="url(#glow)">
      <rect x="720" y="340" width="150" height="60" rx="8" fill="#92400e"/>
      <text x="795" y="365" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Surgery Scheduling</text>
      <text x="795" y="385" text-anchor="middle" fill="#fef3c7" font-size="9">Pre-Op Checklist</text>
    </g>

    <g filter="url(#glow)">
      <rect x="900" y="140" width="140" height="60" rx="8" fill="#d97706"/>
      <text x="970" y="165" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Pharmacy Dispense</text>
      <text x="970" y="185" text-anchor="middle" fill="#fef3c7" font-size="9">Stock Deduction</text>
    </g>

    <g filter="url(#glow)">
      <rect x="900" y="220" width="140" height="60" rx="8" fill="#b45309"/>
      <text x="970" y="245" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Optical Shop</text>
      <text x="970" y="265" text-anchor="middle" fill="#fef3c7" font-size="9">Try-On, Production</text>
    </g>

    <!-- Arrows in Treatment -->
    <path d="M680,170 L720,130" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <path d="M680,250 L720,280" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <path d="M870,125 L900,155" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <path d="M870,210 L900,240" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>

    <!-- Financial Phase -->
    <g filter="url(#glow)">
      <rect x="1080" y="100" width="150" height="70" rx="8" fill="#db2777"/>
      <text x="1155" y="125" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Invoice Creation</text>
      <text x="1155" y="145" text-anchor="middle" fill="#fbcfe8" font-size="9">Fee Schedule Lookup</text>
      <text x="1155" y="160" text-anchor="middle" fill="#f9a8d4" font-size="9">Convention Rules</text>
    </g>

    <g filter="url(#glow)">
      <rect x="1080" y="190" width="150" height="60" rx="8" fill="#be185d"/>
      <text x="1155" y="215" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Prior Authorization</text>
      <text x="1155" y="235" text-anchor="middle" fill="#fbcfe8" font-size="9">Insurance Approval</text>
    </g>

    <g filter="url(#glow)">
      <rect x="1080" y="270" width="150" height="70" rx="8" fill="#ec4899"/>
      <text x="1155" y="295" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Payment</text>
      <text x="1155" y="315" text-anchor="middle" fill="#fbcfe8" font-size="9">Cash/Card/Mobile</text>
      <text x="1155" y="330" text-anchor="middle" fill="#f9a8d4" font-size="9">Payment Plans</text>
    </g>

    <g filter="url(#glow)">
      <rect x="1250" y="180" width="120" height="70" rx="8" fill="#9d174d"/>
      <text x="1310" y="205" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Receipt &</text>
      <text x="1310" y="223" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Documents</text>
      <text x="1310" y="243" text-anchor="middle" fill="#fbcfe8" font-size="9">PDF Generation</text>
    </g>

    <!-- Arrows in Financial -->
    <path d="M1040,170 L1080,135" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <path d="M1040,250 L1080,305" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <path d="M1155,170 L1155,190" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <path d="M1155,250 L1155,270" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <path d="M1230,305 Q1270,305 1250,225" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>

    <!-- Cross-cutting concerns at bottom -->
    <rect x="50" y="430" width="1320" height="100" rx="8" fill="#1e293b" stroke="#334155" stroke-width="2"/>
    <text x="700" y="455" text-anchor="middle" fill="#94a3b8" font-size="12" font-weight="bold">CROSS-CUTTING SERVICES</text>

    <g>
      <rect x="80" y="470" width="140" height="45" rx="6" fill="#334155"/>
      <text x="150" y="498" text-anchor="middle" fill="#e2e8f0" font-size="10">WebSocket Real-time</text>
    </g>
    <g>
      <rect x="240" y="470" width="140" height="45" rx="6" fill="#334155"/>
      <text x="310" y="498" text-anchor="middle" fill="#e2e8f0" font-size="10">Audit Logging</text>
    </g>
    <g>
      <rect x="400" y="470" width="140" height="45" rx="6" fill="#334155"/>
      <text x="470" y="498" text-anchor="middle" fill="#e2e8f0" font-size="10">Role-Based Access</text>
    </g>
    <g>
      <rect x="560" y="470" width="140" height="45" rx="6" fill="#334155"/>
      <text x="630" y="498" text-anchor="middle" fill="#e2e8f0" font-size="10">Multi-Clinic Sync</text>
    </g>
    <g>
      <rect x="720" y="470" width="140" height="45" rx="6" fill="#334155"/>
      <text x="790" y="498" text-anchor="middle" fill="#e2e8f0" font-size="10">Notifications</text>
    </g>
    <g>
      <rect x="880" y="470" width="140" height="45" rx="6" fill="#334155"/>
      <text x="950" y="498" text-anchor="middle" fill="#e2e8f0" font-size="10">Offline Support</text>
    </g>
    <g>
      <rect x="1040" y="470" width="140" height="45" rx="6" fill="#334155"/>
      <text x="1110" y="498" text-anchor="middle" fill="#e2e8f0" font-size="10">Analytics</text>
    </g>
    <g>
      <rect x="1200" y="470" width="150" height="45" rx="6" fill="#334155"/>
      <text x="1275" y="498" text-anchor="middle" fill="#e2e8f0" font-size="10">Document Generation</text>
    </g>

    <!-- Vertical connection lines to cross-cutting -->
    <line x1="270" y1="290" x2="270" y2="430" stroke="#334155" stroke-width="1" stroke-dasharray="4"/>
    <line x1="450" y1="350" x2="450" y2="430" stroke="#334155" stroke-width="1" stroke-dasharray="4"/>
    <line x1="795" y1="400" x2="795" y2="430" stroke="#334155" stroke-width="1" stroke-dasharray="4"/>
    <line x1="1155" y1="340" x2="1155" y2="430" stroke="#334155" stroke-width="1" stroke-dasharray="4"/>
  </svg>

  <div class="legend">
    <div class="legend-item"><div class="legend-color" style="background: #3b82f6;"></div><span>Entry/Registration</span></div>
    <div class="legend-item"><div class="legend-color" style="background: #10b981;"></div><span>Clinical Workflows</span></div>
    <div class="legend-item"><div class="legend-color" style="background: #f59e0b;"></div><span>Treatment/Dispensing</span></div>
    <div class="legend-item"><div class="legend-color" style="background: #ec4899;"></div><span>Financial/Billing</span></div>
    <div class="legend-item"><div class="legend-color" style="background: #334155;"></div><span>Cross-cutting Services</span></div>
  </div>
</div>

<!-- Module Interconnections Matrix -->
<div class="section">
  <h2>Module Interconnection Matrix</h2>
  <svg viewBox="0 0 1200 700" style="background: #0f172a; border-radius: 12px;">
    <!-- Central Hub -->
    <circle cx="600" cy="350" r="60" fill="#1e40af" stroke="#60a5fa" stroke-width="3"/>
    <text x="600" y="345" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Patient</text>
    <text x="600" y="362" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Record</text>

    <!-- Surrounding modules -->
    <!-- Top row -->
    <circle cx="300" cy="150" r="50" fill="#059669"/>
    <text x="300" y="145" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Queue</text>
    <text x="300" y="160" text-anchor="middle" fill="white" font-size="9">Management</text>

    <circle cx="500" cy="100" r="50" fill="#10b981"/>
    <text x="500" y="95" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Appointments</text>
    <text x="500" y="110" text-anchor="middle" fill="white" font-size="9">Calendar</text>

    <circle cx="700" cy="100" r="50" fill="#047857"/>
    <text x="700" y="95" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Ophthalmology</text>
    <text x="700" y="110" text-anchor="middle" fill="white" font-size="9">Consultation</text>

    <circle cx="900" cy="150" r="50" fill="#14532d"/>
    <text x="900" y="145" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Laboratory</text>
    <text x="900" y="160" text-anchor="middle" fill="white" font-size="9">Orders</text>

    <!-- Right side -->
    <circle cx="1000" cy="300" r="50" fill="#d97706"/>
    <text x="1000" y="295" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Prescriptions</text>
    <text x="1000" y="310" text-anchor="middle" fill="white" font-size="9">Rx</text>

    <circle cx="1000" cy="450" r="50" fill="#f59e0b"/>
    <text x="1000" y="445" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Pharmacy</text>
    <text x="1000" y="460" text-anchor="middle" fill="white" font-size="9">Inventory</text>

    <!-- Bottom row -->
    <circle cx="900" cy="550" r="50" fill="#b45309"/>
    <text x="900" y="545" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Optical</text>
    <text x="900" y="560" text-anchor="middle" fill="white" font-size="9">Shop</text>

    <circle cx="700" cy="600" r="50" fill="#db2777"/>
    <text x="700" y="595" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Invoicing</text>
    <text x="700" y="610" text-anchor="middle" fill="white" font-size="9">Billing</text>

    <circle cx="500" cy="600" r="50" fill="#be185d"/>
    <text x="500" y="595" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Payments</text>
    <text x="500" y="610" text-anchor="middle" fill="white" font-size="9">Financial</text>

    <circle cx="300" cy="550" r="50" fill="#ec4899"/>
    <text x="300" y="545" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Approvals</text>
    <text x="300" y="560" text-anchor="middle" fill="white" font-size="9">Workflow</text>

    <!-- Left side -->
    <circle cx="200" cy="450" r="50" fill="#8b5cf6"/>
    <text x="200" y="445" text-anchor="middle" fill="white" font-size="10" font-weight="bold">IVT</text>
    <text x="200" y="460" text-anchor="middle" fill="white" font-size="9">Injections</text>

    <circle cx="200" cy="300" r="50" fill="#7c3aed"/>
    <text x="200" y="295" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Surgery</text>
    <text x="200" y="310" text-anchor="middle" fill="white" font-size="9">Cases</text>

    <!-- Connection lines to Patient Record (hub) -->
    <line x1="340" y1="185" x2="555" y2="310" stroke="#64748b" stroke-width="2"/>
    <line x1="500" y1="150" x2="580" y2="295" stroke="#64748b" stroke-width="2"/>
    <line x1="700" y1="150" x2="620" y2="295" stroke="#64748b" stroke-width="2"/>
    <line x1="860" y1="185" x2="645" y2="310" stroke="#64748b" stroke-width="2"/>
    <line x1="950" y1="300" x2="660" y2="340" stroke="#64748b" stroke-width="2"/>
    <line x1="950" y1="450" x2="645" y2="390" stroke="#64748b" stroke-width="2"/>
    <line x1="860" y1="515" x2="640" y2="400" stroke="#64748b" stroke-width="2"/>
    <line x1="700" y1="550" x2="615" y2="405" stroke="#64748b" stroke-width="2"/>
    <line x1="500" y1="550" x2="585" y2="405" stroke="#64748b" stroke-width="2"/>
    <line x1="340" y1="515" x2="560" y2="390" stroke="#64748b" stroke-width="2"/>
    <line x1="250" y1="450" x2="545" y2="370" stroke="#64748b" stroke-width="2"/>
    <line x1="250" y1="300" x2="545" y2="335" stroke="#64748b" stroke-width="2"/>

    <!-- Inter-module connections -->
    <!-- Queue to Appointments -->
    <line x1="345" y1="125" x2="455" y2="115" stroke="#4ade80" stroke-width="2" stroke-dasharray="4"/>
    <!-- Appointments to Ophthalmology -->
    <line x1="550" y1="100" x2="650" y2="100" stroke="#4ade80" stroke-width="2" stroke-dasharray="4"/>
    <!-- Ophthalmology to Lab -->
    <line x1="745" y1="115" x2="855" y2="135" stroke="#4ade80" stroke-width="2" stroke-dasharray="4"/>
    <!-- Ophthalmology to Prescriptions -->
    <line x1="745" y1="130" x2="955" y2="270" stroke="#fbbf24" stroke-width="2" stroke-dasharray="4"/>
    <!-- Prescriptions to Pharmacy -->
    <line x1="1000" y1="350" x2="1000" y2="400" stroke="#fbbf24" stroke-width="2" stroke-dasharray="4"/>
    <!-- Pharmacy to Invoicing -->
    <line x1="955" y1="480" x2="745" y2="570" stroke="#f472b6" stroke-width="2" stroke-dasharray="4"/>
    <!-- Optical to Invoicing -->
    <line x1="855" y1="575" x2="745" y2="585" stroke="#f472b6" stroke-width="2" stroke-dasharray="4"/>
    <!-- Invoicing to Payments -->
    <line x1="650" y1="600" x2="550" y2="600" stroke="#f472b6" stroke-width="2" stroke-dasharray="4"/>
    <!-- Payments to Approvals -->
    <line x1="455" y1="575" x2="345" y2="560" stroke="#f472b6" stroke-width="2" stroke-dasharray="4"/>
    <!-- Surgery to IVT -->
    <line x1="200" y1="350" x2="200" y2="400" stroke="#a78bfa" stroke-width="2" stroke-dasharray="4"/>
    <!-- Surgery to Ophthalmology -->
    <line x1="240" y1="270" x2="660" y2="130" stroke="#a78bfa" stroke-width="2" stroke-dasharray="4"/>

    <!-- Legend -->
    <rect x="50" y="640" width="300" height="50" rx="6" fill="#1e293b"/>
    <line x1="70" y1="655" x2="110" y2="655" stroke="#64748b" stroke-width="2"/>
    <text x="120" y="659" fill="#94a3b8" font-size="10">Patient Data Flow</text>
    <line x1="70" y1="675" x2="110" y2="675" stroke="#4ade80" stroke-width="2" stroke-dasharray="4"/>
    <text x="120" y="679" fill="#94a3b8" font-size="10">Clinical Workflow</text>
    <line x1="220" y1="655" x2="260" y2="655" stroke="#fbbf24" stroke-width="2" stroke-dasharray="4"/>
    <text x="270" y="659" fill="#94a3b8" font-size="10">Treatment Flow</text>
    <line x1="220" y1="675" x2="260" y2="675" stroke="#f472b6" stroke-width="2" stroke-dasharray="4"/>
    <text x="270" y="679" fill="#94a3b8" font-size="10">Financial Flow</text>
  </svg>
</div>

<!-- Detailed Workflow Cards -->
<div class="section">
  <h2>Detailed Workflow Breakdown</h2>
  <div class="workflow-grid">

    <div class="workflow-card">
      <h3>1. Patient Registration Workflow</h3>
      <ul>
        <li>Photo capture (webcam/upload)</li>
        <li>Personal information (names, DOB)</li>
        <li>Contact details (phone, email, address)</li>
        <li>Insurance/Convention assignment</li>
        <li>Emergency contacts</li>
      </ul>
      <p style="margin-top: 15px; color: #64748b; font-size: 0.9rem;">
        <strong>Triggers:</strong> Queue entry, Visit creation, Patient record
      </p>
    </div>

    <div class="workflow-card">
      <h3>2. Queue Management Workflow</h3>
      <ul>
        <li>Walk-in registration (WalkInModal)</li>
        <li>Appointment check-in (CheckInModal)</li>
        <li>Priority assignment (urgent/normal)</li>
        <li>Room assignment (RoomModal)</li>
        <li>Call next patient (audio announce)</li>
        <li>Real-time display board updates</li>
      </ul>
      <p style="margin-top: 15px; color: #64748b; font-size: 0.9rem;">
        <strong>WebSocket Events:</strong> queue:update, patient_called
      </p>
    </div>

    <div class="workflow-card">
      <h3>3. Ophthalmology Consultation Flow</h3>
      <ul>
        <li>Chief complaint entry</li>
        <li>Visual acuity measurement</li>
        <li>Refraction (auto/manifest)</li>
        <li>Slit lamp examination</li>
        <li>Fundus examination</li>
        <li>IOP measurement</li>
        <li>Diagnosis (ICD-10)</li>
        <li>Treatment plan</li>
      </ul>
      <p style="margin-top: 15px; color: #64748b; font-size: 0.9rem;">
        <strong>Creates:</strong> Visit, OphthalmologyExam, Prescription, Invoice
      </p>
    </div>

    <div class="workflow-card">
      <h3>4. Device Integration Flow</h3>
      <ul>
        <li>Network device discovery (scan)</li>
        <li>SMB/CIFS folder watching</li>
        <li>File processing (DICOM, CSV, XML)</li>
        <li>Patient ID matching</li>
        <li>Data parsing (OCT, Autorefractor)</li>
        <li>Result storage in exam record</li>
      </ul>
      <p style="margin-top: 15px; color: #64748b; font-size: 0.9rem;">
        <strong>Adapters:</strong> OCT, Autorefractor, Biometer, Tonometer, Specular
      </p>
    </div>

    <div class="workflow-card">
      <h3>5. Prescription Workflow</h3>
      <ul>
        <li>Optical Rx (glasses, contacts)</li>
        <li>Medication Rx (drug selection)</li>
        <li>Drug interaction check (automatic)</li>
        <li>Favorite medications (quick-add)</li>
        <li>Treatment protocols (templates)</li>
        <li>Print/Send prescription</li>
        <li>Prior authorization (if required)</li>
      </ul>
      <p style="margin-top: 15px; color: #64748b; font-size: 0.9rem;">
        <strong>Services:</strong> drugSafetyService, treatmentProtocolService
      </p>
    </div>

    <div class="workflow-card">
      <h3>6. Pharmacy Dispensing Flow</h3>
      <ul>
        <li>Rx queue review</li>
        <li>Stock availability check</li>
        <li>Dispensing (partial/full)</li>
        <li>Stock deduction (auto)</li>
        <li>Lot/expiry tracking</li>
        <li>Low stock alerts</li>
        <li>Auto-reorder triggers</li>
      </ul>
      <p style="margin-top: 15px; color: #64748b; font-size: 0.9rem;">
        <strong>Inventory:</strong> PharmacyInventory, DrugSafetyService
      </p>
    </div>

    <div class="workflow-card">
      <h3>7. Optical Shop Workflow</h3>
      <ul>
        <li>Frame selection (inventory lookup)</li>
        <li>Try-on photos</li>
        <li>Lens selection (optical lens inventory)</li>
        <li>Order creation</li>
        <li>Production tracking</li>
        <li>Ready notification</li>
        <li>Delivery/pickup</li>
      </ul>
      <p style="margin-top: 15px; color: #64748b; font-size: 0.9rem;">
        <strong>Inventory:</strong> FrameInventory, OpticalLensInventory
      </p>
    </div>

    <div class="workflow-card">
      <h3>8. IVT Injection Workflow</h3>
      <ul>
        <li>Patient selection (AMD/DME patients)</li>
        <li>Drug selection (anti-VEGF)</li>
        <li>Eye selection (OD/OS/OU)</li>
        <li>Dose entry</li>
        <li>Cumulative dose tracking</li>
        <li>Follow-up scheduling</li>
        <li>Due injection alerts</li>
      </ul>
      <p style="margin-top: 15px; color: #64748b; font-size: 0.9rem;">
        <strong>Services:</strong> cumulativeDoseService, ivtVialController
      </p>
    </div>

    <div class="workflow-card">
      <h3>9. Surgery Workflow</h3>
      <ul>
        <li>Case scheduling</li>
        <li>Pre-op checklist</li>
        <li>Patient verification</li>
        <li>Consent collection</li>
        <li>Surgery execution</li>
        <li>Post-op report</li>
        <li>Complications tracking</li>
      </ul>
      <p style="margin-top: 15px; color: #64748b; font-size: 0.9rem;">
        <strong>Models:</strong> SurgeryCase, SurgicalSupplyInventory
      </p>
    </div>

    <div class="workflow-card">
      <h3>10. Laboratory Workflow</h3>
      <ul>
        <li>Order creation (test selection)</li>
        <li>Specimen collection</li>
        <li>Worklist generation</li>
        <li>Result entry (manual/LIS)</li>
        <li>Westgard QC rules</li>
        <li>Critical value alerts</li>
        <li>Auto-verification</li>
        <li>Result release</li>
      </ul>
      <p style="margin-top: 15px; color: #64748b; font-size: 0.9rem;">
        <strong>Integration:</strong> HL7/LIS, westgardQCService
      </p>
    </div>

    <div class="workflow-card">
      <h3>11. Invoicing Workflow</h3>
      <ul>
        <li>Service/item selection</li>
        <li>Fee schedule lookup (736 items)</li>
        <li>Convention rules application</li>
        <li>Discount management</li>
        <li>Tax calculation</li>
        <li>Invoice generation</li>
        <li>Prior authorization (if needed)</li>
      </ul>
      <p style="margin-top: 15px; color: #64748b; font-size: 0.9rem;">
        <strong>Models:</strong> Invoice, FeeSchedule, Company (conventions)
      </p>
    </div>

    <div class="workflow-card">
      <h3>12. Payment Processing Flow</h3>
      <ul>
        <li>Payment method selection</li>
        <li>Multi-currency (USD/CDF)</li>
        <li>Partial payments</li>
        <li>Payment plans (installments)</li>
        <li>Insurance claims</li>
        <li>Receipt generation</li>
        <li>Payment reminders (automated)</li>
      </ul>
      <p style="margin-top: 15px; color: #64748b; font-size: 0.9rem;">
        <strong>Services:</strong> paymentGateway, paymentPlanAutoChargeService
      </p>
    </div>

  </div>
</div>

<!-- Inventory Systems Interconnection -->
<div class="section">
  <h2>Inventory Systems Interconnection</h2>
  <svg viewBox="0 0 1000 500" style="background: #0f172a; border-radius: 12px;">
    <!-- Central Inventory Hub -->
    <rect x="380" y="180" width="240" height="100" rx="12" fill="#7c3aed" stroke="#a78bfa" stroke-width="2"/>
    <text x="500" y="215" text-anchor="middle" fill="white" font-size="14" font-weight="bold">Inventory Management</text>
    <text x="500" y="240" text-anchor="middle" fill="#c4b5fd" font-size="11">Cross-Clinic Summary</text>
    <text x="500" y="260" text-anchor="middle" fill="#c4b5fd" font-size="11">Low Stock Alerts | Expiry Tracking</text>

    <!-- Inventory Types -->
    <rect x="50" y="50" width="150" height="70" rx="8" fill="#3b82f6"/>
    <text x="125" y="80" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Pharmacy</text>
    <text x="125" y="98" text-anchor="middle" fill="#93c5fd" font-size="9">Medications, Drops</text>
    <text x="125" y="112" text-anchor="middle" fill="#93c5fd" font-size="9">Cold Chain Tracking</text>

    <rect x="230" y="50" width="150" height="70" rx="8" fill="#2563eb"/>
    <text x="305" y="80" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Frame Inventory</text>
    <text x="305" y="98" text-anchor="middle" fill="#93c5fd" font-size="9">Glasses Frames</text>
    <text x="305" y="112" text-anchor="middle" fill="#93c5fd" font-size="9">Barcode Lookup</text>

    <rect x="620" y="50" width="150" height="70" rx="8" fill="#1d4ed8"/>
    <text x="695" y="80" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Optical Lens</text>
    <text x="695" y="98" text-anchor="middle" fill="#93c5fd" font-size="9">Single/Progressive</text>
    <text x="695" y="112" text-anchor="middle" fill="#93c5fd" font-size="9">Power Matrix</text>

    <rect x="800" y="50" width="150" height="70" rx="8" fill="#1e40af"/>
    <text x="875" y="80" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Contact Lens</text>
    <text x="875" y="98" text-anchor="middle" fill="#93c5fd" font-size="9">Daily/Monthly</text>
    <text x="875" y="112" text-anchor="middle" fill="#93c5fd" font-size="9">BC/Diameter</text>

    <rect x="50" y="350" width="150" height="70" rx="8" fill="#059669"/>
    <text x="125" y="380" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Reagent Inventory</text>
    <text x="125" y="398" text-anchor="middle" fill="#6ee7b7" font-size="9">Lab Reagents</text>
    <text x="125" y="412" text-anchor="middle" fill="#6ee7b7" font-size="9">Lot Tracking</text>

    <rect x="230" y="350" width="150" height="70" rx="8" fill="#047857"/>
    <text x="305" y="380" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Lab Consumables</text>
    <text x="305" y="398" text-anchor="middle" fill="#6ee7b7" font-size="9">Tubes, Slides</text>
    <text x="305" y="412" text-anchor="middle" fill="#6ee7b7" font-size="9">Category Filter</text>

    <rect x="620" y="350" width="150" height="70" rx="8" fill="#d97706"/>
    <text x="695" y="380" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Surgical Supplies</text>
    <text x="695" y="398" text-anchor="middle" fill="#fef3c7" font-size="9">IOLs, Instruments</text>
    <text x="695" y="412" text-anchor="middle" fill="#fef3c7" font-size="9">Sterilization Track</text>

    <rect x="800" y="350" width="150" height="70" rx="8" fill="#b45309"/>
    <text x="875" y="380" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Equipment Catalog</text>
    <text x="875" y="398" text-anchor="middle" fill="#fef3c7" font-size="9">Devices, Parts</text>
    <text x="875" y="412" text-anchor="middle" fill="#fef3c7" font-size="9">Warranty Track</text>

    <!-- Connection lines -->
    <line x1="125" y1="120" x2="400" y2="180" stroke="#64748b" stroke-width="2"/>
    <line x1="305" y1="120" x2="450" y2="180" stroke="#64748b" stroke-width="2"/>
    <line x1="695" y1="120" x2="550" y2="180" stroke="#64748b" stroke-width="2"/>
    <line x1="875" y1="120" x2="600" y2="180" stroke="#64748b" stroke-width="2"/>
    <line x1="125" y1="350" x2="400" y2="280" stroke="#64748b" stroke-width="2"/>
    <line x1="305" y1="350" x2="450" y2="280" stroke="#64748b" stroke-width="2"/>
    <line x1="695" y1="350" x2="550" y2="280" stroke="#64748b" stroke-width="2"/>
    <line x1="875" y1="350" x2="600" y2="280" stroke="#64748b" stroke-width="2"/>

    <!-- Cross-clinic transfer arrow -->
    <rect x="420" y="320" width="160" height="40" rx="6" fill="#1e293b" stroke="#334155"/>
    <text x="500" y="345" text-anchor="middle" fill="#94a3b8" font-size="10">Cross-Clinic Transfers</text>

    <!-- Workflow triggers -->
    <rect x="420" y="130" width="160" height="35" rx="6" fill="#1e293b" stroke="#334155"/>
    <text x="500" y="152" text-anchor="middle" fill="#94a3b8" font-size="10">Auto-Reorder Triggers</text>
  </svg>
</div>

<!-- Data Model Relationships -->
<div class="section">
  <h2>Core Data Model Relationships</h2>
  <table class="module-table">
    <thead>
      <tr>
        <th>Entity</th>
        <th>Key Relationships</th>
        <th>Workflow Impact</th>
        <th>Category</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Patient</strong></td>
        <td>Visits, Prescriptions, Invoices, Appointments, OphthalmologyExams, IVT Records</td>
        <td>Central entity - all workflows connect here</td>
        <td><span class="badge badge-core">Core</span></td>
      </tr>
      <tr>
        <td><strong>Visit</strong></td>
        <td>Patient, OphthalmologyExam, Prescriptions, Invoice, Queue Entry</td>
        <td>Groups all clinical activities for a single encounter</td>
        <td><span class="badge badge-clinical">Clinical</span></td>
      </tr>
      <tr>
        <td><strong>OphthalmologyExam</strong></td>
        <td>Visit, Patient, DeviceMeasurements, DeviceImages</td>
        <td>Stores all exam data (VA, refraction, slit lamp, fundus, IOP)</td>
        <td><span class="badge badge-clinical">Clinical</span></td>
      </tr>
      <tr>
        <td><strong>Prescription</strong></td>
        <td>Patient, Visit, Pharmacy Dispense, GlassesOrder</td>
        <td>Triggers pharmacy queue, optical shop orders</td>
        <td><span class="badge badge-clinical">Clinical</span></td>
      </tr>
      <tr>
        <td><strong>Invoice</strong></td>
        <td>Patient, Visit, Payments, FeeSchedule, Company (convention)</td>
        <td>Created from clinical services, triggers payment flow</td>
        <td><span class="badge badge-financial">Financial</span></td>
      </tr>
      <tr>
        <td><strong>LabOrder</strong></td>
        <td>Patient, Visit, LabResults, ReagentInventory</td>
        <td>Triggers specimen collection, result entry, inventory deduction</td>
        <td><span class="badge badge-clinical">Clinical</span></td>
      </tr>
      <tr>
        <td><strong>SurgeryCase</strong></td>
        <td>Patient, SurgicalSupplyInventory, Invoice</td>
        <td>Pre-op checklist, supply tracking, post-op billing</td>
        <td><span class="badge badge-clinical">Clinical</span></td>
      </tr>
      <tr>
        <td><strong>GlassesOrder</strong></td>
        <td>Patient, Prescription, FrameInventory, OpticalLensInventory</td>
        <td>Frame/lens reservation, production tracking</td>
        <td><span class="badge badge-inventory">Inventory</span></td>
      </tr>
      <tr>
        <td><strong>PharmacyInventory</strong></td>
        <td>Dispensing, LowStockAlerts, ExpiryTracking</td>
        <td>Deducted on dispense, triggers reorder alerts</td>
        <td><span class="badge badge-inventory">Inventory</span></td>
      </tr>
      <tr>
        <td><strong>Company (Convention)</strong></td>
        <td>Patients, Invoices, FeeSchedule overrides, Annual limits</td>
        <td>Applies coverage rules, creates approval workflows</td>
        <td><span class="badge badge-financial">Financial</span></td>
      </tr>
      <tr>
        <td><strong>User</strong></td>
        <td>AuditLogs, Permissions, Clinic assignments</td>
        <td>Role-based access control, audit trail</td>
        <td><span class="badge badge-admin">Admin</span></td>
      </tr>
      <tr>
        <td><strong>Device</strong></td>
        <td>DeviceMeasurements, DeviceImages, Adapters</td>
        <td>Automatic data import to patient records</td>
        <td><span class="badge badge-admin">Admin</span></td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Real-time Events -->
<div class="section">
  <h2>Real-Time WebSocket Events Flow</h2>
  <svg viewBox="0 0 1000 400" style="background: #0f172a; border-radius: 12px;">
    <!-- WebSocket Server -->
    <rect x="400" y="30" width="200" height="60" rx="8" fill="#7c3aed"/>
    <text x="500" y="55" text-anchor="middle" fill="white" font-size="12" font-weight="bold">WebSocket Server</text>
    <text x="500" y="75" text-anchor="middle" fill="#c4b5fd" font-size="10">Socket.io (Port 5001)</text>

    <!-- Event Categories -->
    <g>
      <rect x="50" y="130" width="180" height="100" rx="8" fill="#059669"/>
      <text x="140" y="155" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Queue Events</text>
      <text x="140" y="175" text-anchor="middle" fill="#6ee7b7" font-size="9">queue:update</text>
      <text x="140" y="190" text-anchor="middle" fill="#6ee7b7" font-size="9">patient_called</text>
      <text x="140" y="205" text-anchor="middle" fill="#6ee7b7" font-size="9">queue_update</text>
      <text x="140" y="220" text-anchor="middle" fill="#6ee7b7" font-size="9">Display Board Sync</text>
    </g>

    <g>
      <rect x="260" y="130" width="180" height="100" rx="8" fill="#3b82f6"/>
      <text x="350" y="155" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Patient Events</text>
      <text x="350" y="175" text-anchor="middle" fill="#93c5fd" font-size="9">patient:updated</text>
      <text x="350" y="190" text-anchor="middle" fill="#93c5fd" font-size="9">patient_update</text>
      <text x="350" y="205" text-anchor="middle" fill="#93c5fd" font-size="9">Context Panel Sync</text>
    </g>

    <g>
      <rect x="470" y="130" width="180" height="100" rx="8" fill="#d97706"/>
      <text x="560" y="155" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Clinical Events</text>
      <text x="560" y="175" text-anchor="middle" fill="#fef3c7" font-size="9">prescription:new</text>
      <text x="560" y="190" text-anchor="middle" fill="#fef3c7" font-size="9">lab:results</text>
      <text x="560" y="205" text-anchor="middle" fill="#fef3c7" font-size="9">lab:critical</text>
      <text x="560" y="220" text-anchor="middle" fill="#fef3c7" font-size="9">device:measurement:new</text>
    </g>

    <g>
      <rect x="680" y="130" width="180" height="100" rx="8" fill="#db2777"/>
      <text x="770" y="155" text-anchor="middle" fill="white" font-size="11" font-weight="bold">System Events</text>
      <text x="770" y="175" text-anchor="middle" fill="#fbcfe8" font-size="9">notification:new</text>
      <text x="770" y="190" text-anchor="middle" fill="#fbcfe8" font-size="9">inventory:alert</text>
      <text x="770" y="205" text-anchor="middle" fill="#fbcfe8" font-size="9">dashboard:update</text>
      <text x="770" y="220" text-anchor="middle" fill="#fbcfe8" font-size="9">appointment:updated</text>
    </g>

    <!-- Connection lines -->
    <line x1="500" y1="90" x2="140" y2="130" stroke="#64748b" stroke-width="2"/>
    <line x1="500" y1="90" x2="350" y2="130" stroke="#64748b" stroke-width="2"/>
    <line x1="500" y1="90" x2="560" y2="130" stroke="#64748b" stroke-width="2"/>
    <line x1="500" y1="90" x2="770" y2="130" stroke="#64748b" stroke-width="2"/>

    <!-- Clients -->
    <rect x="200" y="280" width="600" height="80" rx="8" fill="#1e293b" stroke="#334155"/>
    <text x="500" y="305" text-anchor="middle" fill="#94a3b8" font-size="11" font-weight="bold">Connected Clients (Room-based)</text>
    <text x="200" y="340" text-anchor="middle" fill="#64748b" font-size="9">user:{userId}</text>
    <text x="350" y="340" text-anchor="middle" fill="#64748b" font-size="9">role:doctor</text>
    <text x="500" y="340" text-anchor="middle" fill="#64748b" font-size="9">queue:updates</text>
    <text x="650" y="340" text-anchor="middle" fill="#64748b" font-size="9">patient:{id}</text>
    <text x="800" y="340" text-anchor="middle" fill="#64748b" font-size="9">notifications</text>

    <!-- Arrows to clients -->
    <line x1="140" y1="230" x2="250" y2="280" stroke="#64748b" stroke-width="1" stroke-dasharray="4"/>
    <line x1="350" y1="230" x2="350" y2="280" stroke="#64748b" stroke-width="1" stroke-dasharray="4"/>
    <line x1="560" y1="230" x2="560" y2="280" stroke="#64748b" stroke-width="1" stroke-dasharray="4"/>
    <line x1="770" y1="230" x2="700" y2="280" stroke="#64748b" stroke-width="1" stroke-dasharray="4"/>
  </svg>
</div>

<!-- Multi-Clinic Architecture -->
<div class="section">
  <h2>Multi-Clinic Architecture</h2>
  <svg viewBox="0 0 1000 450" style="background: #0f172a; border-radius: 12px;">
    <!-- Central Server -->
    <rect x="350" y="30" width="300" height="80" rx="12" fill="#7c3aed" stroke="#a78bfa" stroke-width="3"/>
    <text x="500" y="60" text-anchor="middle" fill="white" font-size="14" font-weight="bold">Central Sync Server</text>
    <text x="500" y="80" text-anchor="middle" fill="#c4b5fd" font-size="10">Port 5002 - Clinic Registry</text>
    <text x="500" y="95" text-anchor="middle" fill="#c4b5fd" font-size="10">Cross-Clinic Search | Consolidated Reports</text>

    <!-- Clinics -->
    <rect x="50" y="180" width="200" height="120" rx="8" fill="#1e40af"/>
    <text x="150" y="210" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Clinic: GOMA</text>
    <text x="150" y="235" text-anchor="middle" fill="#93c5fd" font-size="9">Backend :5001</text>
    <text x="150" y="250" text-anchor="middle" fill="#93c5fd" font-size="9">Frontend :5173</text>
    <text x="150" y="265" text-anchor="middle" fill="#93c5fd" font-size="9">MongoDB (local)</text>
    <text x="150" y="280" text-anchor="middle" fill="#93c5fd" font-size="9">Redis (local)</text>

    <rect x="300" y="180" width="200" height="120" rx="8" fill="#2563eb"/>
    <text x="400" y="210" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Clinic: KINSHASA</text>
    <text x="400" y="235" text-anchor="middle" fill="#93c5fd" font-size="9">Backend :5001</text>
    <text x="400" y="250" text-anchor="middle" fill="#93c5fd" font-size="9">Frontend :5173</text>
    <text x="400" y="265" text-anchor="middle" fill="#93c5fd" font-size="9">MongoDB (local)</text>
    <text x="400" y="280" text-anchor="middle" fill="#93c5fd" font-size="9">Redis (local)</text>

    <rect x="550" y="180" width="200" height="120" rx="8" fill="#3b82f6"/>
    <text x="650" y="210" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Clinic: LUBUMBASHI</text>
    <text x="650" y="235" text-anchor="middle" fill="#93c5fd" font-size="9">Backend :5001</text>
    <text x="650" y="250" text-anchor="middle" fill="#93c5fd" font-size="9">Frontend :5173</text>
    <text x="650" y="265" text-anchor="middle" fill="#93c5fd" font-size="9">MongoDB (local)</text>
    <text x="650" y="280" text-anchor="middle" fill="#93c5fd" font-size="9">Redis (local)</text>

    <rect x="750" y="180" width="200" height="120" rx="8" fill="#60a5fa"/>
    <text x="850" y="210" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Clinic: BUKAVU</text>
    <text x="850" y="235" text-anchor="middle" fill="#1e3a5f" font-size="9">Backend :5001</text>
    <text x="850" y="250" text-anchor="middle" fill="#1e3a5f" font-size="9">Frontend :5173</text>
    <text x="850" y="265" text-anchor="middle" fill="#1e3a5f" font-size="9">MongoDB (local)</text>
    <text x="850" y="280" text-anchor="middle" fill="#1e3a5f" font-size="9">Redis (local)</text>

    <!-- Sync arrows -->
    <line x1="150" y1="180" x2="400" y2="110" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="400" y1="180" x2="450" y2="110" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="650" y1="180" x2="550" y2="110" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="850" y1="180" x2="600" y2="110" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- Sync features -->
    <rect x="100" y="350" width="800" height="70" rx="8" fill="#1e293b" stroke="#334155"/>
    <text x="500" y="375" text-anchor="middle" fill="#94a3b8" font-size="11" font-weight="bold">Cross-Clinic Features</text>
    <text x="200" y="400" text-anchor="middle" fill="#64748b" font-size="9">Patient Search (All Clinics)</text>
    <text x="400" y="400" text-anchor="middle" fill="#64748b" font-size="9">Inventory Transfers</text>
    <text x="600" y="400" text-anchor="middle" fill="#64748b" font-size="9">Consolidated Reports</text>
    <text x="800" y="400" text-anchor="middle" fill="#64748b" font-size="9">Offline Sync Queue</text>
  </svg>
</div>

<!-- Clinical Decision Support System -->
<div class="section">
  <h2>Clinical Decision Support (CDS) - AI-Powered Alerts & Referrals</h2>
  <svg viewBox="0 0 1200 500" style="background: #0f172a; border-radius: 12px;">
    <!-- Title -->
    <text x="600" y="30" text-anchor="middle" fill="#e2e8f0" font-size="16" font-weight="bold">Clinical Decision Support Pipeline</text>

    <!-- Input Sources -->
    <rect x="50" y="80" width="180" height="120" rx="8" fill="#059669"/>
    <text x="140" y="110" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Clinical Data Input</text>
    <text x="140" y="130" text-anchor="middle" fill="#6ee7b7" font-size="9">Visual Acuity</text>
    <text x="140" y="145" text-anchor="middle" fill="#6ee7b7" font-size="9">IOP Measurements</text>
    <text x="140" y="160" text-anchor="middle" fill="#6ee7b7" font-size="9">OCT/RNFL Data</text>
    <text x="140" y="175" text-anchor="middle" fill="#6ee7b7" font-size="9">Visual Fields</text>
    <text x="140" y="190" text-anchor="middle" fill="#6ee7b7" font-size="9">Fundus Findings</text>

    <!-- Analysis Services -->
    <rect x="280" y="60" width="160" height="70" rx="8" fill="#7c3aed"/>
    <text x="360" y="90" text-anchor="middle" fill="white" font-size="10" font-weight="bold">RNFL Analysis</text>
    <text x="360" y="108" text-anchor="middle" fill="#c4b5fd" font-size="9">Thickness Mapping</text>
    <text x="360" y="122" text-anchor="middle" fill="#c4b5fd" font-size="9">Progression Detection</text>

    <rect x="280" y="140" width="160" height="70" rx="8" fill="#8b5cf6"/>
    <text x="360" y="170" text-anchor="middle" fill="white" font-size="10" font-weight="bold">GPA Service</text>
    <text x="360" y="188" text-anchor="middle" fill="#c4b5fd" font-size="9">Visual Field Analysis</text>
    <text x="360" y="202" text-anchor="middle" fill="#c4b5fd" font-size="9">Trend Detection</text>

    <rect x="280" y="220" width="160" height="70" rx="8" fill="#a78bfa"/>
    <text x="360" y="250" text-anchor="middle" fill="white" font-size="10" font-weight="bold">DR Grading</text>
    <text x="360" y="268" text-anchor="middle" fill="#ddd6fe" font-size="9">NPDR/PDR Classification</text>
    <text x="360" y="282" text-anchor="middle" fill="#ddd6fe" font-size="9">DME Detection</text>

    <!-- Alert Engine -->
    <rect x="500" y="100" width="200" height="160" rx="12" fill="#dc2626" stroke="#fca5a5" stroke-width="2"/>
    <text x="600" y="130" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Clinical Alert Engine</text>
    <text x="600" y="155" text-anchor="middle" fill="#fecaca" font-size="10">EMERGENCY (Blocking)</text>
    <text x="600" y="172" text-anchor="middle" fill="#fca5a5" font-size="8">NPL, Acute Angle Closure, RD</text>
    <text x="600" y="192" text-anchor="middle" fill="#fecaca" font-size="10">URGENT (Banner)</text>
    <text x="600" y="209" text-anchor="middle" fill="#fca5a5" font-size="8">IOP>40, Wet AMD, Keratitis</text>
    <text x="600" y="229" text-anchor="middle" fill="#fecaca" font-size="10">WARNING / INFO</text>
    <text x="600" y="246" text-anchor="middle" fill="#fca5a5" font-size="8">Follow-up alerts, trends</text>

    <!-- Referral Triggers -->
    <rect x="760" y="60" width="180" height="200" rx="8" fill="#0891b2"/>
    <text x="850" y="85" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Auto-Referral Triggers</text>
    <text x="850" y="108" text-anchor="middle" fill="#a5f3fc" font-size="9">Retina Specialist</text>
    <text x="850" y="123" text-anchor="middle" fill="#67e8f9" font-size="8">PDR, WET AMD, RVO, RD</text>
    <text x="850" y="143" text-anchor="middle" fill="#a5f3fc" font-size="9">Glaucoma Specialist</text>
    <text x="850" y="158" text-anchor="middle" fill="#67e8f9" font-size="8">Uncontrolled IOP, VF Loss</text>
    <text x="850" y="178" text-anchor="middle" fill="#a5f3fc" font-size="9">Cornea Specialist</text>
    <text x="850" y="193" text-anchor="middle" fill="#67e8f9" font-size="8">Perforation, Ulcer, Graft</text>
    <text x="850" y="213" text-anchor="middle" fill="#a5f3fc" font-size="9">Neuro-Ophthalmology</text>
    <text x="850" y="228" text-anchor="middle" fill="#67e8f9" font-size="8">Optic Neuropathy, CN Palsy</text>
    <text x="850" y="248" text-anchor="middle" fill="#a5f3fc" font-size="9">Pediatric / Oculoplastics</text>

    <!-- Output Actions -->
    <rect x="1000" y="80" width="150" height="50" rx="6" fill="#f59e0b"/>
    <text x="1075" y="100" text-anchor="middle" fill="white" font-size="10" font-weight="bold">UI Alert Banner</text>
    <text x="1075" y="118" text-anchor="middle" fill="#fef3c7" font-size="8">Blocking / Dismissible</text>

    <rect x="1000" y="145" width="150" height="50" rx="6" fill="#eab308"/>
    <text x="1075" y="165" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Referral Letter</text>
    <text x="1075" y="183" text-anchor="middle" fill="#fef9c3" font-size="8">Auto-generated PDF</text>

    <rect x="1000" y="210" width="150" height="50" rx="6" fill="#ca8a04"/>
    <text x="1075" y="230" text-anchor="middle" fill="white" font-size="10" font-weight="bold">WebSocket Push</text>
    <text x="1075" y="248" text-anchor="middle" fill="#fef9c3" font-size="8">Real-time notification</text>

    <!-- Arrows -->
    <line x1="230" y1="140" x2="280" y2="100" stroke="#64748b" stroke-width="2"/>
    <line x1="230" y1="140" x2="280" y2="175" stroke="#64748b" stroke-width="2"/>
    <line x1="230" y1="140" x2="280" y2="255" stroke="#64748b" stroke-width="2"/>
    <line x1="440" y1="100" x2="500" y2="150" stroke="#64748b" stroke-width="2"/>
    <line x1="440" y1="175" x2="500" y2="180" stroke="#64748b" stroke-width="2"/>
    <line x1="440" y1="255" x2="500" y2="210" stroke="#64748b" stroke-width="2"/>
    <line x1="700" y1="180" x2="760" y2="160" stroke="#64748b" stroke-width="2"/>
    <line x1="940" y1="130" x2="1000" y2="105" stroke="#64748b" stroke-width="2"/>
    <line x1="940" y1="160" x2="1000" y2="170" stroke="#64748b" stroke-width="2"/>
    <line x1="940" y1="200" x2="1000" y2="235" stroke="#64748b" stroke-width="2"/>

    <!-- Legend -->
    <rect x="50" y="320" width="1100" height="160" rx="8" fill="#1e293b" stroke="#334155"/>
    <text x="600" y="345" text-anchor="middle" fill="#94a3b8" font-size="12" font-weight="bold">Alert Severity Levels & Recommended Actions</text>

    <rect x="80" y="365" width="320" height="100" rx="6" fill="#7f1d1d"/>
    <text x="240" y="390" text-anchor="middle" fill="#fecaca" font-size="10" font-weight="bold">EMERGENCY - Requires Immediate Action</text>
    <text x="240" y="410" text-anchor="middle" fill="#fca5a5" font-size="8">No Light Perception (NPL)  Neuro consult, Imaging</text>
    <text x="240" y="425" text-anchor="middle" fill="#fca5a5" font-size="8">Acute Angle Closure  Laser PI, Medical IOP reduction</text>
    <text x="240" y="440" text-anchor="middle" fill="#fca5a5" font-size="8">Retinal Detachment  Immediate surgery referral</text>
    <text x="240" y="455" text-anchor="middle" fill="#fca5a5" font-size="8">Chemical Burn  Irrigation, Cornea urgent consult</text>

    <rect x="440" y="365" width="320" height="100" rx="6" fill="#7c2d12"/>
    <text x="600" y="390" text-anchor="middle" fill="#fed7aa" font-size="10" font-weight="bold">URGENT - Same Day / 24-48 Hours</text>
    <text x="600" y="410" text-anchor="middle" fill="#fdba74" font-size="8">IOP > 30 mmHg  Max medical therapy, Follow-up</text>
    <text x="600" y="425" text-anchor="middle" fill="#fdba74" font-size="8">Wet AMD New Onset  Anti-VEGF scheduling</text>
    <text x="600" y="440" text-anchor="middle" fill="#fdba74" font-size="8">Microbial Keratitis  Cultures, Intensive drops</text>
    <text x="600" y="455" text-anchor="middle" fill="#fdba74" font-size="8">Rapid VF Progression  Glaucoma specialist</text>

    <rect x="800" y="365" width="320" height="100" rx="6" fill="#422006"/>
    <text x="960" y="390" text-anchor="middle" fill="#fef3c7" font-size="10" font-weight="bold">WARNING / INFO - Routine Follow-up</text>
    <text x="960" y="410" text-anchor="middle" fill="#fde68a" font-size="8">IOP 22-30 mmHg  Schedule recheck</text>
    <text x="960" y="425" text-anchor="middle" fill="#fde68a" font-size="8">Borderline RNFL  6-month OCT</text>
    <text x="960" y="440" text-anchor="middle" fill="#fde68a" font-size="8">Moderate DR  Annual dilated exam</text>
    <text x="960" y="455" text-anchor="middle" fill="#fde68a" font-size="8">Drug interaction  Review medications</text>
  </svg>
</div>

<!-- E-Prescribing & Insurance Claims -->
<div class="section">
  <h2>E-Prescribing & Insurance Claims Workflows</h2>
  <svg viewBox="0 0 1200 400" style="background: #0f172a; border-radius: 12px;">
    <!-- E-Prescribing Flow -->
    <text x="300" y="30" text-anchor="middle" fill="#60a5fa" font-size="14" font-weight="bold">E-Prescribing (NCPDP SCRIPT)</text>

    <rect x="50" y="50" width="130" height="70" rx="8" fill="#3b82f6"/>
    <text x="115" y="80" text-anchor="middle" fill="white" font-size="10" font-weight="bold">NewRx</text>
    <text x="115" y="95" text-anchor="middle" fill="#93c5fd" font-size="8">Prescription Created</text>
    <text x="115" y="108" text-anchor="middle" fill="#93c5fd" font-size="8">Drug Safety Check</text>

    <rect x="200" y="50" width="130" height="70" rx="8" fill="#2563eb"/>
    <text x="265" y="80" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Transmit</text>
    <text x="265" y="95" text-anchor="middle" fill="#93c5fd" font-size="8">Surescripts/RCopia</text>
    <text x="265" y="108" text-anchor="middle" fill="#93c5fd" font-size="8">DrFirst Network</text>

    <rect x="350" y="50" width="130" height="70" rx="8" fill="#1d4ed8"/>
    <text x="415" y="80" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Pharmacy</text>
    <text x="415" y="95" text-anchor="middle" fill="#93c5fd" font-size="8">RxFill Confirmation</text>
    <text x="415" y="108" text-anchor="middle" fill="#93c5fd" font-size="8">Status Updates</text>

    <rect x="500" y="50" width="130" height="70" rx="8" fill="#1e40af"/>
    <text x="565" y="80" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Refills</text>
    <text x="565" y="95" text-anchor="middle" fill="#93c5fd" font-size="8">RefillRequest</text>
    <text x="565" y="108" text-anchor="middle" fill="#93c5fd" font-size="8">RefillResponse</text>

    <!-- Arrows -->
    <line x1="180" y1="85" x2="200" y2="85" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="330" y1="85" x2="350" y2="85" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="480" y1="85" x2="500" y2="85" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- Insurance Claims Flow -->
    <text x="300" y="160" text-anchor="middle" fill="#f472b6" font-size="14" font-weight="bold">Insurance Claims Processing</text>

    <rect x="50" y="180" width="120" height="80" rx="8" fill="#db2777"/>
    <text x="110" y="205" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Invoice</text>
    <text x="110" y="220" text-anchor="middle" fill="#fbcfe8" font-size="8">Services Rendered</text>
    <text x="110" y="235" text-anchor="middle" fill="#fbcfe8" font-size="8">ICD-10 Codes</text>
    <text x="110" y="250" text-anchor="middle" fill="#fbcfe8" font-size="8">CPT Codes</text>

    <rect x="190" y="180" width="120" height="80" rx="8" fill="#be185d"/>
    <text x="250" y="205" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Claim Gen</text>
    <text x="250" y="220" text-anchor="middle" fill="#fbcfe8" font-size="8">Auto-populate</text>
    <text x="250" y="235" text-anchor="middle" fill="#fbcfe8" font-size="8">Policy Lookup</text>
    <text x="250" y="250" text-anchor="middle" fill="#fbcfe8" font-size="8">Validation</text>

    <rect x="330" y="180" width="120" height="80" rx="8" fill="#9d174d"/>
    <text x="390" y="205" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Submit</text>
    <text x="390" y="220" text-anchor="middle" fill="#fbcfe8" font-size="8">Electronic (EDI)</text>
    <text x="390" y="235" text-anchor="middle" fill="#fbcfe8" font-size="8">Paper (if needed)</text>
    <text x="390" y="250" text-anchor="middle" fill="#fbcfe8" font-size="8">Track Status</text>

    <rect x="470" y="180" width="120" height="80" rx="8" fill="#831843"/>
    <text x="530" y="205" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Processing</text>
    <text x="530" y="220" text-anchor="middle" fill="#fbcfe8" font-size="8">Adjudication</text>
    <text x="530" y="235" text-anchor="middle" fill="#fbcfe8" font-size="8">EOB Receipt</text>
    <text x="530" y="250" text-anchor="middle" fill="#fbcfe8" font-size="8">Adjustments</text>

    <rect x="610" y="180" width="120" height="80" rx="8" fill="#4ade80"/>
    <text x="670" y="205" text-anchor="middle" fill="#14532d" font-size="10" font-weight="bold">Payment</text>
    <text x="670" y="220" text-anchor="middle" fill="#166534" font-size="8">Insurance Pays</text>
    <text x="670" y="235" text-anchor="middle" fill="#166534" font-size="8">Patient Balance</text>
    <text x="670" y="250" text-anchor="middle" fill="#166534" font-size="8">Reconciliation</text>

    <!-- Rejected path -->
    <rect x="470" y="290" width="120" height="60" rx="8" fill="#ef4444"/>
    <text x="530" y="315" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Rejected</text>
    <text x="530" y="332" text-anchor="middle" fill="#fecaca" font-size="8">Appeal Process</text>
    <text x="530" y="345" text-anchor="middle" fill="#fecaca" font-size="8">Resubmit</text>

    <!-- Arrows -->
    <line x1="170" y1="220" x2="190" y2="220" stroke="#64748b" stroke-width="2"/>
    <line x1="310" y1="220" x2="330" y2="220" stroke="#64748b" stroke-width="2"/>
    <line x1="450" y1="220" x2="470" y2="220" stroke="#64748b" stroke-width="2"/>
    <line x1="590" y1="220" x2="610" y2="220" stroke="#64748b" stroke-width="2"/>
    <line x1="530" y1="260" x2="530" y2="290" stroke="#ef4444" stroke-width="2" stroke-dasharray="4"/>
    <path d="M470,320 Q400,320 390,260" stroke="#ef4444" stroke-width="2" stroke-dasharray="4" fill="none"/>

    <!-- Claim Status Legend -->
    <rect x="760" y="50" width="400" height="300" rx="8" fill="#1e293b" stroke="#334155"/>
    <text x="960" y="80" text-anchor="middle" fill="#94a3b8" font-size="12" font-weight="bold">Claim Status Workflow</text>

    <rect x="780" y="100" width="80" height="30" rx="4" fill="#6b7280"/>
    <text x="820" y="120" text-anchor="middle" fill="white" font-size="9">Draft</text>
    <rect x="880" y="100" width="80" height="30" rx="4" fill="#f59e0b"/>
    <text x="920" y="120" text-anchor="middle" fill="white" font-size="9">Pending</text>
    <rect x="980" y="100" width="80" height="30" rx="4" fill="#3b82f6"/>
    <text x="1020" y="120" text-anchor="middle" fill="white" font-size="9">Submitted</text>
    <rect x="1080" y="100" width="80" height="30" rx="4" fill="#8b5cf6"/>
    <text x="1120" y="120" text-anchor="middle" fill="white" font-size="9">Processing</text>

    <rect x="780" y="150" width="80" height="30" rx="4" fill="#10b981"/>
    <text x="820" y="170" text-anchor="middle" fill="white" font-size="9">Approved</text>
    <rect x="880" y="150" width="80" height="30" rx="4" fill="#14b8a6"/>
    <text x="920" y="170" text-anchor="middle" fill="white" font-size="8">Partial</text>
    <rect x="980" y="150" width="80" height="30" rx="4" fill="#ef4444"/>
    <text x="1020" y="170" text-anchor="middle" fill="white" font-size="9">Rejected</text>
    <rect x="1080" y="150" width="80" height="30" rx="4" fill="#f97316"/>
    <text x="1120" y="170" text-anchor="middle" fill="white" font-size="9">Appealed</text>

    <rect x="880" y="200" width="80" height="30" rx="4" fill="#22c55e"/>
    <text x="920" y="220" text-anchor="middle" fill="white" font-size="9">Paid</text>
    <rect x="980" y="200" width="80" height="30" rx="4" fill="#64748b"/>
    <text x="1020" y="220" text-anchor="middle" fill="white" font-size="9">Closed</text>

    <!-- Key Data Points -->
    <text x="960" y="260" text-anchor="middle" fill="#94a3b8" font-size="10" font-weight="bold">InsuranceClaim Model Fields</text>
    <text x="960" y="280" text-anchor="middle" fill="#64748b" font-size="8">claimNumber | invoice | patient | provider</text>
    <text x="960" y="295" text-anchor="middle" fill="#64748b" font-size="8">services[] | amounts | status | history</text>
    <text x="960" y="310" text-anchor="middle" fill="#64748b" font-size="8">totalCharged | approvedAmount | patientResponsibility</text>
    <text x="960" y="325" text-anchor="middle" fill="#64748b" font-size="8">paidAmount | writeOffAmount | adjustments</text>
  </svg>
</div>

<!-- Administrative Workflows -->
<div class="section">
  <h2>Administrative Workflows - Waiting List, Rooms & Provider Availability</h2>
  <div class="workflow-grid">
    <div class="workflow-card">
      <h3>Waiting List Management</h3>
      <ul>
        <li>Patient request with preferences</li>
        <li>Day/time preferences (Mon-Sun, AM/PM)</li>
        <li>Provider preference (specific or any)</li>
        <li>Priority levels (normal/high/urgent)</li>
        <li>Auto-match when slot opens</li>
        <li>SMS/Email notification</li>
        <li>Acceptance confirmation</li>
        <li>Auto-booking on confirm</li>
      </ul>
      <p style="margin-top: 15px; color: #64748b; font-size: 0.9rem;">
        <strong>Model:</strong> WaitingList<br>
        <strong>Triggers:</strong> Slot availability, Cancellation
      </p>
    </div>

    <div class="workflow-card">
      <h3>Room Management</h3>
      <ul>
        <li>Room definition (exam, procedure, surgery)</li>
        <li>Equipment assignment</li>
        <li>Provider-room mapping</li>
        <li>Real-time availability status</li>
        <li>Queue integration (room assignment)</li>
        <li>Display board updates</li>
        <li>Cleaning/turnover tracking</li>
        <li>Audio announcement system</li>
      </ul>
      <p style="margin-top: 15px; color: #64748b; font-size: 0.9rem;">
        <strong>Model:</strong> Room<br>
        <strong>Route:</strong> /api/rooms
      </p>
    </div>

    <div class="workflow-card">
      <h3>Provider Availability</h3>
      <ul>
        <li>Weekly schedule templates</li>
        <li>Working hours per day</li>
        <li>Break times / lunch blocks</li>
        <li>Vacation / leave management</li>
        <li>Overbooking rules</li>
        <li>Appointment duration by type</li>
        <li>Multi-clinic assignments</li>
        <li>Calendar sync (Google/Outlook)</li>
      </ul>
      <p style="margin-top: 15px; color: #64748b; font-size: 0.9rem;">
        <strong>Model:</strong> ProviderAvailability<br>
        <strong>Service:</strong> calendarIntegrationService
      </p>
    </div>

    <div class="workflow-card">
      <h3>Orthoptic Examinations</h3>
      <ul>
        <li>Cover test (distance/near)</li>
        <li>Eye movement assessment</li>
        <li>Stereopsis testing</li>
        <li>Fusion evaluation</li>
        <li>Accommodation testing</li>
        <li>Vergence ranges</li>
        <li>Prism measurements</li>
        <li>Pediatric-specific tests</li>
      </ul>
      <p style="margin-top: 15px; color: #64748b; font-size: 0.9rem;">
        <strong>Model:</strong> OrthopticExam<br>
        <strong>Route:</strong> /api/orthoptic
      </p>
    </div>
  </div>
</div>

<!-- Support & Operations Workflows -->
<div class="section">
  <h2>Support & Operations Workflows</h2>
  <svg viewBox="0 0 1200 450" style="background: #0f172a; border-radius: 12px;">
    <!-- Procurement Flow -->
    <text x="200" y="30" text-anchor="middle" fill="#8b5cf6" font-size="14" font-weight="bold">Procurement & Purchase Orders</text>

    <rect x="50" y="50" width="120" height="70" rx="8" fill="#dc2626"/>
    <text x="110" y="75" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Low Stock</text>
    <text x="110" y="90" text-anchor="middle" fill="#fecaca" font-size="8">Alert Triggered</text>
    <text x="110" y="103" text-anchor="middle" fill="#fecaca" font-size="8">Reorder Point</text>

    <rect x="190" y="50" width="120" height="70" rx="8" fill="#7c3aed"/>
    <text x="250" y="75" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Auto-Reorder</text>
    <text x="250" y="90" text-anchor="middle" fill="#c4b5fd" font-size="8">Calculate Qty</text>
    <text x="250" y="103" text-anchor="middle" fill="#c4b5fd" font-size="8">Supplier Select</text>

    <rect x="330" y="50" width="120" height="70" rx="8" fill="#6366f1"/>
    <text x="390" y="75" text-anchor="middle" fill="white" font-size="10" font-weight="bold">PO Created</text>
    <text x="390" y="90" text-anchor="middle" fill="#c7d2fe" font-size="8">Approval Flow</text>
    <text x="390" y="103" text-anchor="middle" fill="#c7d2fe" font-size="8">Send to Supplier</text>

    <rect x="470" y="50" width="120" height="70" rx="8" fill="#4f46e5"/>
    <text x="530" y="75" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Receiving</text>
    <text x="530" y="90" text-anchor="middle" fill="#c7d2fe" font-size="8">Qty Verification</text>
    <text x="530" y="103" text-anchor="middle" fill="#c7d2fe" font-size="8">Quality Check</text>

    <rect x="610" y="50" width="120" height="70" rx="8" fill="#4ade80"/>
    <text x="670" y="75" text-anchor="middle" fill="#14532d" font-size="10" font-weight="bold">Stock Update</text>
    <text x="670" y="90" text-anchor="middle" fill="#166534" font-size="8">Inventory +</text>
    <text x="670" y="103" text-anchor="middle" fill="#166534" font-size="8">Lot Tracking</text>

    <!-- Arrows -->
    <line x1="170" y1="85" x2="190" y2="85" stroke="#64748b" stroke-width="2"/>
    <line x1="310" y1="85" x2="330" y2="85" stroke="#64748b" stroke-width="2"/>
    <line x1="450" y1="85" x2="470" y2="85" stroke="#64748b" stroke-width="2"/>
    <line x1="590" y1="85" x2="610" y2="85" stroke="#64748b" stroke-width="2"/>

    <!-- Fulfillment & Dispatch -->
    <text x="200" y="160" text-anchor="middle" fill="#f59e0b" font-size="14" font-weight="bold">Optical Order Fulfillment</text>

    <rect x="50" y="180" width="110" height="70" rx="8" fill="#f59e0b"/>
    <text x="105" y="205" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Order</text>
    <text x="105" y="220" text-anchor="middle" fill="#fef3c7" font-size="8">Glasses/Contact</text>
    <text x="105" y="233" text-anchor="middle" fill="#fef3c7" font-size="8">Specs Locked</text>

    <rect x="180" y="180" width="110" height="70" rx="8" fill="#d97706"/>
    <text x="235" y="205" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Lab Queue</text>
    <text x="235" y="220" text-anchor="middle" fill="#fef3c7" font-size="8">Production</text>
    <text x="235" y="233" text-anchor="middle" fill="#fef3c7" font-size="8">External Lab</text>

    <rect x="310" y="180" width="110" height="70" rx="8" fill="#b45309"/>
    <text x="365" y="205" text-anchor="middle" fill="white" font-size="10" font-weight="bold">QC Check</text>
    <text x="365" y="220" text-anchor="middle" fill="#fef3c7" font-size="8">Verification</text>
    <text x="365" y="233" text-anchor="middle" fill="#fef3c7" font-size="8">Adjustments</text>

    <rect x="440" y="180" width="110" height="70" rx="8" fill="#92400e"/>
    <text x="495" y="205" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Dispatch</text>
    <text x="495" y="220" text-anchor="middle" fill="#fef3c7" font-size="8">Tracking #</text>
    <text x="495" y="233" text-anchor="middle" fill="#fef3c7" font-size="8">Carrier</text>

    <rect x="570" y="180" width="110" height="70" rx="8" fill="#4ade80"/>
    <text x="625" y="205" text-anchor="middle" fill="#14532d" font-size="10" font-weight="bold">Ready</text>
    <text x="625" y="220" text-anchor="middle" fill="#166534" font-size="8">SMS Notify</text>
    <text x="625" y="233" text-anchor="middle" fill="#166534" font-size="8">Pickup/Delivery</text>

    <!-- Arrows -->
    <line x1="160" y1="215" x2="180" y2="215" stroke="#64748b" stroke-width="2"/>
    <line x1="290" y1="215" x2="310" y2="215" stroke="#64748b" stroke-width="2"/>
    <line x1="420" y1="215" x2="440" y2="215" stroke="#64748b" stroke-width="2"/>
    <line x1="550" y1="215" x2="570" y2="215" stroke="#64748b" stroke-width="2"/>

    <!-- Warranty & Repairs -->
    <text x="950" y="30" text-anchor="middle" fill="#06b6d4" font-size="14" font-weight="bold">Equipment Warranty & Repairs</text>

    <rect x="780" y="50" width="150" height="80" rx="8" fill="#0891b2"/>
    <text x="855" y="75" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Equipment Catalog</text>
    <text x="855" y="93" text-anchor="middle" fill="#a5f3fc" font-size="8">Serial Numbers</text>
    <text x="855" y="108" text-anchor="middle" fill="#a5f3fc" font-size="8">Purchase Date</text>
    <text x="855" y="123" text-anchor="middle" fill="#a5f3fc" font-size="8">Warranty Expiry</text>

    <rect x="950" y="50" width="150" height="80" rx="8" fill="#0e7490"/>
    <text x="1025" y="75" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Warranty Tracking</text>
    <text x="1025" y="93" text-anchor="middle" fill="#a5f3fc" font-size="8">Expiry Alerts</text>
    <text x="1025" y="108" text-anchor="middle" fill="#a5f3fc" font-size="8">Claim History</text>
    <text x="1025" y="123" text-anchor="middle" fill="#a5f3fc" font-size="8">Service Contracts</text>

    <rect x="780" y="150" width="150" height="80" rx="8" fill="#155e75"/>
    <text x="855" y="175" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Repair Tracking</text>
    <text x="855" y="193" text-anchor="middle" fill="#a5f3fc" font-size="8">Issue Reported</text>
    <text x="855" y="208" text-anchor="middle" fill="#a5f3fc" font-size="8">Service Request</text>
    <text x="855" y="223" text-anchor="middle" fill="#a5f3fc" font-size="8">Parts Ordered</text>

    <rect x="950" y="150" width="150" height="80" rx="8" fill="#164e63"/>
    <text x="1025" y="175" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Service History</text>
    <text x="1025" y="193" text-anchor="middle" fill="#a5f3fc" font-size="8">Maintenance Log</text>
    <text x="1025" y="208" text-anchor="middle" fill="#a5f3fc" font-size="8">Downtime Track</text>
    <text x="1025" y="223" text-anchor="middle" fill="#a5f3fc" font-size="8">Cost Analysis</text>

    <!-- External Facilities -->
    <text x="950" y="270" text-anchor="middle" fill="#ec4899" font-size="14" font-weight="bold">External Facility Referrals</text>

    <rect x="780" y="290" width="170" height="90" rx="8" fill="#db2777"/>
    <text x="865" y="315" text-anchor="middle" fill="white" font-size="10" font-weight="bold">External Facilities</text>
    <text x="865" y="333" text-anchor="middle" fill="#fbcfe8" font-size="8">Partner Labs</text>
    <text x="865" y="348" text-anchor="middle" fill="#fbcfe8" font-size="8">Specialist Clinics</text>
    <text x="865" y="363" text-anchor="middle" fill="#fbcfe8" font-size="8">Hospitals</text>
    <text x="865" y="378" text-anchor="middle" fill="#fbcfe8" font-size="8">Imaging Centers</text>

    <rect x="970" y="290" width="170" height="90" rx="8" fill="#be185d"/>
    <text x="1055" y="315" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Referral Workflow</text>
    <text x="1055" y="333" text-anchor="middle" fill="#fbcfe8" font-size="8">Auto Letter Generation</text>
    <text x="1055" y="348" text-anchor="middle" fill="#fbcfe8" font-size="8">Fax/Email Transmission</text>
    <text x="1055" y="363" text-anchor="middle" fill="#fbcfe8" font-size="8">Response Tracking</text>
    <text x="1055" y="378" text-anchor="middle" fill="#fbcfe8" font-size="8">Follow-up Alerts</text>

    <!-- Models List -->
    <rect x="50" y="280" width="680" height="150" rx="8" fill="#1e293b" stroke="#334155"/>
    <text x="390" y="305" text-anchor="middle" fill="#94a3b8" font-size="12" font-weight="bold">Support Workflow Models & Services</text>

    <text x="180" y="335" text-anchor="middle" fill="#60a5fa" font-size="10" font-weight="bold">Models</text>
    <text x="180" y="355" text-anchor="middle" fill="#64748b" font-size="8">PurchaseOrder | Supplier</text>
    <text x="180" y="370" text-anchor="middle" fill="#64748b" font-size="8">FulfillmentDispatch | GlassesOrder</text>
    <text x="180" y="385" text-anchor="middle" fill="#64748b" font-size="8">EquipmentCatalog | WarrantyTracking</text>
    <text x="180" y="400" text-anchor="middle" fill="#64748b" font-size="8">RepairTracking | ExternalFacility</text>
    <text x="180" y="415" text-anchor="middle" fill="#64748b" font-size="8">StockReconciliation</text>

    <text x="450" y="335" text-anchor="middle" fill="#10b981" font-size="10" font-weight="bold">Services</text>
    <text x="450" y="355" text-anchor="middle" fill="#64748b" font-size="8">autoReorderService - Auto purchase orders</text>
    <text x="450" y="370" text-anchor="middle" fill="#64748b" font-size="8">coldChainService - Temperature monitoring</text>
    <text x="450" y="385" text-anchor="middle" fill="#64748b" font-size="8">reservationCleanupScheduler - Stock holds</text>
    <text x="450" y="400" text-anchor="middle" fill="#64748b" font-size="8">labelPrintingService - Barcode labels</text>
    <text x="450" y="415" text-anchor="middle" fill="#64748b" font-size="8">referralTriggerService - Auto referrals</text>
  </svg>
</div>

<!-- Document Generation & Notifications -->
<div class="section">
  <h2>Document Generation & Notification System</h2>
  <div class="workflow-grid">
    <div class="workflow-card">
      <h3>CERFA Document Generator</h3>
      <ul>
        <li>Ordonnance (Prescription PDF)</li>
        <li>Certificat Mdical (Medical Certificate)</li>
        <li>Arrt de Travail (Work Stop Certificate)</li>
        <li>Lettre de Rfrence (Referral Letter)</li>
        <li>Compte-Rendu (Consultation Report)</li>
        <li>Auto-populated from patient data</li>
        <li>Digital signature support</li>
        <li>Template customization</li>
      </ul>
      <p style="margin-top: 15px; color: #64748b; font-size: 0.9rem;">
        <strong>Service:</strong> cerfaGenerator, pdfGenerator
      </p>
    </div>

    <div class="workflow-card">
      <h3>Template System</h3>
      <ul>
        <li>LetterTemplate - Correspondence</li>
        <li>DocumentTemplate - Generic docs</li>
        <li>ConsultationTemplate - Visit notes</li>
        <li>MedicationTemplate - Drug combos</li>
        <li>ExaminationTemplate - Exam forms</li>
        <li>PathologyTemplate - Lab reports</li>
        <li>LaboratoryTemplate - Test panels</li>
        <li>CommentTemplate - Quick notes</li>
      </ul>
      <p style="margin-top: 15px; color: #64748b; font-size: 0.9rem;">
        <strong>Route:</strong> /api/templateCatalog
      </p>
    </div>

    <div class="workflow-card">
      <h3>Email Queue Service</h3>
      <ul>
        <li>Appointment reminders (24h, 1h)</li>
        <li>Payment reminders (overdue)</li>
        <li>Prescription ready notifications</li>
        <li>Lab results available</li>
        <li>Follow-up due alerts</li>
        <li>Batch processing (30s intervals)</li>
        <li>Delivery tracking</li>
        <li>Bounce handling</li>
      </ul>
      <p style="margin-top: 15px; color: #64748b; font-size: 0.9rem;">
        <strong>Service:</strong> emailQueueService, emailService
      </p>
    </div>

    <div class="workflow-card">
      <h3>SMS Notification Service</h3>
      <ul>
        <li>Appointment confirmations</li>
        <li>Queue position updates</li>
        <li>Patient called to room</li>
        <li>Glasses/Rx ready pickup</li>
        <li>Payment confirmations</li>
        <li>Follow-up reminders</li>
        <li>Multi-provider support</li>
        <li>Delivery status tracking</li>
      </ul>
      <p style="margin-top: 15px; color: #64748b; font-size: 0.9rem;">
        <strong>Service:</strong> smsService, enhancedNotificationService
      </p>
    </div>

    <div class="workflow-card">
      <h3>Fiscal Year Management</h3>
      <ul>
        <li>Year definition (start/end dates)</li>
        <li>Period locks (monthly close)</li>
        <li>Financial reporting periods</li>
        <li>Tax year alignment</li>
        <li>Year-end close process</li>
        <li>Audit trail per period</li>
        <li>Multi-currency support</li>
        <li>Convention year tracking</li>
      </ul>
      <p style="margin-top: 15px; color: #64748b; font-size: 0.9rem;">
        <strong>Model:</strong> FiscalYear<br>
        <strong>Route:</strong> /api/fiscal-year
      </p>
    </div>

    <div class="workflow-card">
      <h3>Legacy Data Migration</h3>
      <ul>
        <li>Patient data import</li>
        <li>Visit history migration</li>
        <li>Prescription conversion</li>
        <li>Invoice/payment history</li>
        <li>Duplicate detection</li>
        <li>Field mapping rules</li>
        <li>Validation & cleanup</li>
        <li>Rollback capability</li>
      </ul>
      <p style="margin-top: 15px; color: #64748b; font-size: 0.9rem;">
        <strong>Service:</strong> legacyPatientMapper<br>
        <strong>Model:</strong> LegacyMapping
      </p>
    </div>
  </div>
</div>

<!-- Complete Model Reference -->
<div class="section">
  <h2>Complete Data Model Reference (83 Models)</h2>
  <table class="module-table">
    <thead>
      <tr>
        <th>Category</th>
        <th>Models</th>
        <th>Key Relationships</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="badge badge-core">Core (5)</span></td>
        <td>Patient, User, Clinic, Settings, Counter</td>
        <td>Foundation for all other entities</td>
      </tr>
      <tr>
        <td><span class="badge badge-clinical">Clinical (14)</span></td>
        <td>Visit, OphthalmologyExam, OrthopticExam, Prescription, IVTInjection, IVTVial, LabOrder, LabResult, ImagingOrder, ImagingStudy, ClinicalAlert, ClinicalAct, ConsultationSession, SurgeryCase</td>
        <td>Patient, Visit, Provider relationships</td>
      </tr>
      <tr>
        <td><span class="badge badge-financial">Financial (10)</span></td>
        <td>Invoice, PaymentPlan, FeeSchedule, ConventionFeeSchedule, TaxConfig, Company, InsuranceClaim, Service, FiscalYear, Approval</td>
        <td>Patient, Invoice, Convention chains</td>
      </tr>
      <tr>
        <td><span class="badge badge-inventory">Inventory (12)</span></td>
        <td>PharmacyInventory, FrameInventory, OpticalLensInventory, ContactLensInventory, ReagentInventory, ReagentLot, LabConsumableInventory, SurgicalSupplyInventory, EquipmentCatalog, PurchaseOrder, InventoryTransfer, StockReconciliation</td>
        <td>Clinic, Supplier, Stock movements</td>
      </tr>
      <tr>
        <td><span class="badge badge-admin">Scheduling (6)</span></td>
        <td>Appointment, AppointmentType, ProviderAvailability, WaitingList, Room, CalendarIntegration</td>
        <td>Patient, Provider, Clinic</td>
      </tr>
      <tr>
        <td><span class="badge badge-admin">Devices (6)</span></td>
        <td>Device, DeviceMeasurement, DeviceImage, DeviceIntegrationLog, LabAnalyzer, LISIntegration</td>
        <td>Patient, Exam, Clinic</td>
      </tr>
      <tr>
        <td><span class="badge badge-admin">Templates (10)</span></td>
        <td>LetterTemplate, DocumentTemplate, ConsultationTemplate, MedicationTemplate, ExaminationTemplate, PathologyTemplate, LaboratoryTemplate, CommentTemplate, DoseTemplate, ClinicalTemplate</td>
        <td>Clinic, Category based</td>
      </tr>
      <tr>
        <td><span class="badge badge-admin">Documents (4)</span></td>
        <td>Document, Correspondence, GlassesOrder, SurgeryReport</td>
        <td>Patient, Visit, Provider</td>
      </tr>
      <tr>
        <td><span class="badge badge-admin">Operations (8)</span></td>
        <td>Supplier, FulfillmentDispatch, WarrantyTracking, RepairTracking, ExternalFacility, Referrer, Drug, UnitConversion</td>
        <td>Inventory, Equipment, Partners</td>
      </tr>
      <tr>
        <td><span class="badge badge-admin">System (8)</span></td>
        <td>AuditLog, Notification, Alert, EmailQueue, RolePermission, SyncQueue, TreatmentProtocol, LegacyMapping</td>
        <td>Cross-cutting concerns</td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Complete Service Reference -->
<div class="section">
  <h2>Complete Service Reference (61 Services)</h2>
  <table class="module-table">
    <thead>
      <tr>
        <th>Category</th>
        <th>Services</th>
        <th>Function</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="badge badge-clinical">Clinical AI (6)</span></td>
        <td>clinicalAlertService, rnflAnalysisService, gpaService, drGradingService, referralTriggerService, therapeuticClassService</td>
        <td>Decision support, alerts, referrals</td>
      </tr>
      <tr>
        <td><span class="badge badge-clinical">Drug Safety (3)</span></td>
        <td>drugSafetyService, doseCalculationService, cumulativeDoseService</td>
        <td>Interactions, dosing, cumulative tracking</td>
      </tr>
      <tr>
        <td><span class="badge badge-clinical">Prescribing (2)</span></td>
        <td>ePrescribingService, ivtComplianceService</td>
        <td>E-Rx transmission, IVT compliance</td>
      </tr>
      <tr>
        <td><span class="badge badge-financial">Financial (3)</span></td>
        <td>paymentGateway, paymentPlanAutoChargeService, currencyService</td>
        <td>Payments, plans, multi-currency</td>
      </tr>
      <tr>
        <td><span class="badge badge-inventory">Inventory (4)</span></td>
        <td>autoReorderService, coldChainService, reservationCleanupScheduler, labelPrintingService</td>
        <td>Auto-reorder, cold chain, labels</td>
      </tr>
      <tr>
        <td><span class="badge badge-admin">Devices (9)</span></td>
        <td>folderSyncService, universalFileProcessor, patientFolderIndexer, networkDiscoveryService, smb2ClientService, smbStreamService, deviceSyncScheduler, deviceSyncQueue, AdapterFactory</td>
        <td>Device integration, file processing</td>
      </tr>
      <tr>
        <td><span class="badge badge-admin">Notifications (5)</span></td>
        <td>notificationService, notificationFacade, enhancedNotificationService, emailService, emailQueueService, smsService</td>
        <td>Email, SMS, push notifications</td>
      </tr>
      <tr>
        <td><span class="badge badge-admin">Documents (2)</span></td>
        <td>pdfGenerator, cerfaGenerator</td>
        <td>PDF generation, CERFA forms</td>
      </tr>
      <tr>
        <td><span class="badge badge-admin">Lab (4)</span></td>
        <td>labAutoVerificationService, lisIntegrationService, hl7ParserService, westgardQCService</td>
        <td>Lab automation, LIS, QC</td>
      </tr>
      <tr>
        <td><span class="badge badge-admin">Schedulers (8)</span></td>
        <td>alertScheduler, reminderScheduler, invoiceReminderScheduler, calendarSyncScheduler, backupScheduler, visitCleanupScheduler, deviceSyncScheduler, reservationCleanupScheduler</td>
        <td>Background jobs, automation</td>
      </tr>
      <tr>
        <td><span class="badge badge-admin">Sync (5)</span></td>
        <td>dataSyncService, autoSyncService, cloudSyncService, centralServerClient, calendarIntegrationService</td>
        <td>Multi-clinic sync, calendar</td>
      </tr>
      <tr>
        <td><span class="badge badge-admin">Infrastructure (10)</span></td>
        <td>websocketService, cacheService, sessionService, backupService, paginationService, distributedLock, sentryService, approvalValidationService, appointmentValidationService, legacyPatientMapper</td>
        <td>Core infrastructure services</td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Test Coverage Summary -->
<div class="section">
  <h2>E2E Test Coverage by Workflow</h2>
  <table class="module-table">
    <thead>
      <tr>
        <th>Workflow</th>
        <th>Tests</th>
        <th>Pass Rate</th>
        <th>Key Validations</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Patient Journey (Full)</td>
        <td>30</td>
        <td style="color: #4ade80;">100%</td>
        <td>Registration, Queue, Consultation, Prescription, Invoice, Payment</td>
      </tr>
      <tr>
        <td>Ophthalmology Consultation</td>
        <td>18</td>
        <td style="color: #4ade80;">100%</td>
        <td>Dashboard, Consultation wizard, Patient detail sections</td>
      </tr>
      <tr>
        <td>Surgery Workflow</td>
        <td>23</td>
        <td style="color: #4ade80;">100%</td>
        <td>Dashboard, New case, Check-in, Report, API</td>
      </tr>
      <tr>
        <td>IVT Workflow</td>
        <td>25</td>
        <td style="color: #4ade80;">100%</td>
        <td>Dashboard, New injection, Cumulative dose, Follow-up</td>
      </tr>
      <tr>
        <td>Laboratory</td>
        <td>8</td>
        <td style="color: #4ade80;">100%</td>
        <td>Orders, Catalog (60 tests), QC rules</td>
      </tr>
      <tr>
        <td>Inventory (Extended)</td>
        <td>34</td>
        <td style="color: #4ade80;">100%</td>
        <td>All 8 inventory types, Low stock, Expiry, API</td>
      </tr>
      <tr>
        <td>Cross-Clinic</td>
        <td>27</td>
        <td style="color: #4ade80;">100%</td>
        <td>Dashboard, Transfers, 4 clinics detected</td>
      </tr>
      <tr>
        <td>Device Integration</td>
        <td>16</td>
        <td style="color: #4ade80;">100%</td>
        <td>12 devices, 6 adapters, Data validation</td>
      </tr>
      <tr>
        <td>Billing/Payments</td>
        <td>12</td>
        <td style="color: #4ade80;">100%</td>
        <td>736 fee schedules, Conventions, Multi-currency</td>
      </tr>
      <tr>
        <td>Comprehensive UI</td>
        <td>111</td>
        <td style="color: #4ade80;">99.1%</td>
        <td>All pages, Responsive, Keyboard shortcuts</td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Footer -->
<div style="text-align: center; padding: 40px; color: #64748b;">
  <p>MedFlow - Enterprise Ophthalmology Clinic Management System</p>
  <p style="font-size: 0.9rem;">Generated: December 15, 2025 | Version 2.0 (Complete)</p>
  <p style="font-size: 0.85rem; margin-top: 10px;">83 Models | 77 Routes | 61 Services | 27 Workflows | 4 Clinics</p>
  <p style="font-size: 0.8rem; margin-top: 5px; color: #475569;">Clinical Decision Support | E-Prescribing | Insurance Claims | Multi-Clinic Sync</p>
</div>

</div>
</body>
</html>
