<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedFlow Complete System Matrix</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: #0a0a1a; color: #e0e0e0; }
        .header { background: linear-gradient(135deg, #1a1a3e 0%, #0d0d2b 100%); padding: 20px; text-align: center; border-bottom: 2px solid #3498db; }
        .header h1 { font-size: 2em; color: #3498db; }
        .stats-bar { display: flex; justify-content: center; gap: 30px; padding: 15px; background: #111128; flex-wrap: wrap; }
        .stat { text-align: center; padding: 10px 20px; background: #1a1a3e; border-radius: 8px; border: 1px solid #333; }
        .stat-num { font-size: 1.8em; font-weight: bold; color: #3498db; }
        .stat-label { font-size: 0.85em; color: #888; }
        .tabs { display: flex; background: #111128; border-bottom: 1px solid #333; overflow-x: auto; }
        .tab { padding: 12px 24px; cursor: pointer; border: none; background: none; color: #888; font-size: 0.95em; white-space: nowrap; }
        .tab:hover { color: #3498db; background: #1a1a3e; }
        .tab.active { color: #3498db; border-bottom: 2px solid #3498db; background: #1a1a3e; }
        .content { padding: 20px; }
        .section { display: none; }
        .section.active { display: block; }
        .matrix-container { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; font-size: 0.85em; }
        th, td { padding: 8px 12px; border: 1px solid #333; text-align: left; }
        th { background: #1a1a3e; color: #3498db; position: sticky; top: 0; }
        tr:hover { background: #1a1a3e; }
        .route { color: #2ecc71; }
        .model { color: #e74c3c; }
        .controller { color: #f39c12; }
        .service { color: #9b59b6; }
        .endpoint { color: #1abc9c; font-family: monospace; font-size: 0.9em; }
        .method { padding: 2px 6px; border-radius: 3px; font-size: 0.8em; font-weight: bold; }
        .method.GET { background: #27ae60; color: white; }
        .method.POST { background: #3498db; color: white; }
        .method.PUT { background: #f39c12; color: white; }
        .method.DELETE { background: #e74c3c; color: white; }
        .search-box { padding: 10px; background: #111128; margin-bottom: 15px; border-radius: 8px; }
        .search-box input { width: 100%; padding: 10px; background: #1a1a3e; border: 1px solid #333; color: #e0e0e0; border-radius: 5px; font-size: 1em; }
        .flow-diagram { background: #111128; padding: 20px; border-radius: 8px; margin: 10px 0; }
        .flow-row { display: flex; align-items: center; margin: 10px 0; flex-wrap: wrap; gap: 10px; }
        .flow-box { padding: 8px 15px; border-radius: 5px; font-size: 0.85em; }
        .flow-arrow { color: #3498db; font-size: 1.2em; }
        .category-header { background: #1a1a3e; padding: 10px 15px; margin: 15px 0 10px; border-left: 4px solid #3498db; font-weight: bold; }
        .relationship-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px; }
        .rel-card { background: #111128; padding: 15px; border-radius: 8px; border: 1px solid #333; }
        .rel-card h4 { color: #3498db; margin-bottom: 10px; }
        .rel-list { font-size: 0.85em; }
        .rel-item { padding: 3px 0; border-bottom: 1px solid #222; }
        .badge { display: inline-block; padding: 2px 8px; border-radius: 10px; font-size: 0.75em; margin: 2px; }
        .badge-ref { background: #2980b9; }
        .badge-embed { background: #8e44ad; }
        .badge-array { background: #16a085; }
        .collapsible { cursor: pointer; padding: 10px; background: #1a1a3e; border: none; width: 100%; text-align: left; color: #e0e0e0; margin: 5px 0; border-radius: 5px; }
        .collapsible:after { content: ' ‚ñº'; float: right; }
        .collapsible.collapsed:after { content: ' ‚ñ∂'; }
        .coll-content { padding: 10px; background: #111128; display: block; }
        .coll-content.hidden { display: none; }
        .ws-event { background: #1a1a3e; padding: 8px 12px; margin: 5px 0; border-radius: 5px; border-left: 3px solid #e74c3c; }
        .redux-slice { background: #111128; padding: 15px; border-radius: 8px; margin: 10px 0; border: 1px solid #333; }
        .slice-name { color: #9b59b6; font-size: 1.1em; font-weight: bold; }
        .state-tree { font-family: monospace; font-size: 0.85em; background: #0a0a1a; padding: 10px; border-radius: 5px; margin-top: 10px; white-space: pre-wrap; }
    </style>
</head>
<body>
    <div class="header">
        <h1>üè• MedFlow Complete System Matrix</h1>
        <p style="color:#888;margin-top:5px;">Exhaustive Component & Connection Analysis</p>
    </div>

    <div class="stats-bar">
        <div class="stat"><div class="stat-num">76</div><div class="stat-label">Route Files</div></div>
        <div class="stat"><div class="stat-num">1,200+</div><div class="stat-label">API Endpoints</div></div>
        <div class="stat"><div class="stat-num">82</div><div class="stat-label">Models</div></div>
        <div class="stat"><div class="stat-num">677</div><div class="stat-label">Model References</div></div>
        <div class="stat"><div class="stat-num">58</div><div class="stat-label">Controllers</div></div>
        <div class="stat"><div class="stat-num">77</div><div class="stat-label">Frontend Services</div></div>
        <div class="stat"><div class="stat-num">91</div><div class="stat-label">Page Components</div></div>
        <div class="stat"><div class="stat-num">10</div><div class="stat-label">Redux Slices</div></div>
    </div>

    <div class="tabs">
        <button class="tab active" onclick="showSection('routes')">Routes ‚Üí Controllers</button>
        <button class="tab" onclick="showSection('models')">Model Relationships</button>
        <button class="tab" onclick="showSection('services')">Frontend ‚Üí API</button>
        <button class="tab" onclick="showSection('redux')">Redux State</button>
        <button class="tab" onclick="showSection('pages')">Page Components</button>
        <button class="tab" onclick="showSection('websocket')">WebSocket Events</button>
        <button class="tab" onclick="showSection('dataflow')">Data Flow</button>
    </div>

    <div class="content">
        <!-- ROUTES SECTION -->
        <div id="routes" class="section active">
            <div class="search-box">
                <input type="text" id="routeSearch" placeholder="Search routes, controllers, endpoints..." onkeyup="filterTable('routeTable', this.value)">
            </div>
            <div class="matrix-container">
                <table id="routeTable">
                    <thead>
                        <tr>
                            <th>Route File</th>
                            <th>Base Path</th>
                            <th>Controller</th>
                            <th>Key Endpoints</th>
                            <th>Methods</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td class="route">patients.js</td><td>/api/patients</td><td class="controller">patientController</td><td class="endpoint">/, /:id, /search, /advanced-search, /:id/visits, /:id/prescriptions, /:id/documents, /:id/allergies, /:id/medications, /:id/billing, /:id/timeline, /check-duplicates, /merge, /export, /mrn/:mrn, /recent</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">appointments.js</td><td>/api/appointments</td><td class="controller">appointmentController</td><td class="endpoint">/, /:id, /today, /available-slots, /:id/checkin, /:id/complete, /:id/cancel, /:id/reschedule, /provider/:providerId, /patient/:patientId, /upcoming, /statistics, /calendar, /waiting-list, /types, /check-conflicts, /recurring</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">visits.js</td><td>/api/visits</td><td class="controller">visitController</td><td class="endpoint">/, /:id, /today, /active, /:id/start, /:id/complete, /:id/sign, /:id/lock, /:id/cancel, /:visitId/acts, /:visitId/vital-signs, /:visitId/notes, /:visitId/diagnoses, /:visitId/prescriptions, /:visitId/lab-orders, /:visitId/imaging-orders, /:visitId/procedures, /:visitId/billing, /:visitId/documents, /:visitId/summary, /timeline/:id, /statistics</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">queue.js</td><td>/api/queue</td><td class="controller">queueController</td><td class="endpoint">/, /next, /stats, /analytics, /:id/call, /display-board, /check-in, /:id/status, /:id/priority</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">invoices.js</td><td>/api/invoices</td><td class="controller">invoiceController</td><td class="endpoint">/, /:id, /patient/:patientId, /:invoiceId/payments, /payments, /:invoiceId/send, /:invoiceId/apply-discount, /:invoiceId/write-off, /:invoiceId/pdf, /:invoiceId/receipt/:paymentIndex, /bulk-generate</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">prescriptions.js</td><td>/api/prescriptions</td><td class="controller">prescriptionController</td><td class="endpoint">/, /:id, /optical, /drug, /:id/verify, /:id/invoice, /:id/dispense, /:id/refill, /:id/renew, /:id/cancel, /check-interactions, /safety-check, /templates, /:id/pdf, /:id/sign, /e-prescribing/*, /prior-auth/*</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">ophthalmology.js</td><td>/api/ophthalmology</td><td class="controller">ophthalmologyController</td><td class="endpoint">/exams, /exams/:id, /exams/:examId/refraction, /exams/:examId/tonometry, /exams/:examId/visual-acuity, /exams/:examId/oct, /exams/:examId/visual-field, /exams/:examId/keratometry, /exams/:examId/biometry, /exams/:examId/slit-lamp, /exams/:examId/fundoscopy, /exams/:examId/prescription, /exams/:examId/iol-calculation, /patients/:patientId/history, /patients/:patientId/progression, /templates, /dashboard-stats</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">laboratory.js</td><td>/api/laboratory</td><td class="controller">laboratoryController</td><td class="endpoint">/tests, /pending, /templates, /stats, /report/:visitId, /specimens, /specimens/barcode/:barcode, /worklist, /worklist/:testId/collect, /worklist/:testId/start, /qc, /qc/history, /trends/:patientId/:testCode, /calculate-delta, /tubes/*, /validate-result, /check-abnormal</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">pharmacy.js</td><td>/api/pharmacy</td><td class="controller">pharmacyController</td><td class="endpoint">/inventory, /inventory/:id, /search, /dispense, /stock-adjustments, /expiring-soon, /low-stock, /reorder-suggestions, /batch-update, /categories, /suppliers, /purchase-orders</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">glassesOrders.js</td><td>/api/glasses-orders</td><td class="controller">glassesOrderController</td><td class="endpoint">/, /:id, /patient/:patientId, /exam/:examId, /stats, /search-frames, /search-contact-lenses, /check-inventory, /:orderId/reserve-inventory, /:orderId/release-inventory, /:orderId/fulfill-inventory, /:orderId/invoice, /unbilled, /pending-qc, /ready-for-pickup, /:orderId/receive, /:orderId/qc, /:orderId/deliver</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">devices.js</td><td>/api/devices</td><td class="controller">deviceController</td><td class="endpoint">/, /:id, /discover, /sync/:deviceId, /measurements/:deviceId, /auto-sync/*, /smb2/*, /sync-queue/*, /index-folders/*</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">documents.js</td><td>/api/documents</td><td class="controller">documentController</td><td class="endpoint">/, /:id, /upload, /upload-multiple, /:id/download, /:id/preview, /upload-audio, /:documentId/transcribe, /:documentId/ocr, /:documentId/share, /search, /categories, /:documentId/versions, /:documentId/sign, /export, /merge, /:documentId/split</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">billing.js</td><td>/api/billing</td><td class="controller">billingController</td><td class="endpoint">/claims, /claims/:id, /claims/:claimId/status, /check-eligibility, /verify-coverage, /fee-schedule, /payment-plans, /outstanding-balances, /statistics, /reports/*, /codes, /era, /taxes, /gateway/*, /currency/*</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">auth.js</td><td>/api/auth</td><td class="controller">authController</td><td class="endpoint">/login, /register, /logout, /me, /updatedetails, /updatepassword, /forgotpassword, /resetpassword/:token, /verifyemail/:token, /refresh-token</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span></td></tr>
                        <tr><td class="route">consultationSessions.js</td><td>/api/consultation-sessions</td><td class="controller">consultationSessionController</td><td class="endpoint">/, /:id, /recent, /active/:patientId, /:id/complete, /:id/abandon</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">ivt.js</td><td>/api/ivt</td><td class="controller">ivtController</td><td class="endpoint">/injections, /injections/:id, /patients/:patientId/history, /dashboard-stats, /upcoming, /due-patients, /protocols, /vials/*</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">surgery.js</td><td>/api/surgery</td><td class="controller">surgeryController</td><td class="endpoint">/cases, /cases/:id, /cases/:id/status, /schedule, /reports, /equipment, /rooms/availability, /checklists, /consents</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">orthoptic.js</td><td>/api/orthoptic</td><td class="controller">orthopticController</td><td class="endpoint">/exams, /exams/:id, /patients/:patientId/history, /templates</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">clinics.js</td><td>/api/clinics</td><td class="controller">clinicController</td><td class="endpoint">/, /:id, /my-clinics, /switch/:clinicId</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">frameInventory.js</td><td>/api/frame-inventory</td><td class="controller">frameInventoryController</td><td class="endpoint">/, /:id, /search, /low-stock, /by-brand, /stats, /import, /export</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">contactLensInventory.js</td><td>/api/contact-lens-inventory</td><td class="controller">contactLensInventoryController</td><td class="endpoint">/, /:id, /search, /low-stock, /expiring-soon, /stats, /fefo-pick</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">opticalLensInventory.js</td><td>/api/optical-lens-inventory</td><td class="controller">opticalLensInventoryController</td><td class="endpoint">/, /:id, /search, /low-stock, /stats</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">reagentInventory.js</td><td>/api/reagent-inventory</td><td class="controller">reagentInventoryController</td><td class="endpoint">/, /:id, /low-stock, /expiring-soon, /cold-chain-alerts</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">crossClinicInventory.js</td><td>/api/cross-clinic-inventory</td><td class="controller">crossClinicInventoryController</td><td class="endpoint">/summary, /by-clinic, /transfers, /alerts</td><td><span class="method GET">GET</span> <span class="method POST">POST</span></td></tr>
                        <tr><td class="route">inventoryTransfers.js</td><td>/api/inventory-transfers</td><td class="controller">inventoryTransferController</td><td class="endpoint">/, /:id, /:id/approve, /:id/reject, /:id/ship, /:id/receive, /pending</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span></td></tr>
                        <tr><td class="route">purchaseOrders.js</td><td>/api/purchase-orders</td><td class="controller">purchaseOrderController</td><td class="endpoint">/, /:id, /:id/approve, /:id/receive, /pending, /by-supplier</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span></td></tr>
                        <tr><td class="route">stockReconciliations.js</td><td>/api/stock-reconciliations</td><td class="controller">stockReconciliationController</td><td class="endpoint">/, /:id, /:id/complete, /discrepancies</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span></td></tr>
                        <tr><td class="route">approvals.js</td><td>/api/approvals</td><td class="controller">approvalController</td><td class="endpoint">/, /:id, /:id/approve, /:id/reject, /pending, /my-requests, /stats</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span></td></tr>
                        <tr><td class="route">feeSchedules.js</td><td>/api/fee-schedules</td><td class="controller">feeScheduleController</td><td class="endpoint">/, /:id, /by-convention, /search, /templates</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">companies.js</td><td>/api/companies</td><td class="controller">companyController</td><td class="endpoint">/, /:id, /search, /conventions</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">referrers.js</td><td>/api/referrers</td><td class="controller">referrerController</td><td class="endpoint">/, /:id, /search, /stats</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">externalFacilities.js</td><td>/api/external-facilities</td><td class="controller">externalFacilityController</td><td class="endpoint">/, /:id, /by-type, /search</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">rooms.js</td><td>/api/rooms</td><td class="controller">roomController</td><td class="endpoint">/, /:id, /availability, /by-clinic</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">labOrders.js</td><td>/api/lab-orders</td><td class="controller">labOrderController</td><td class="endpoint">/, /:id, /:orderId/collect, /:orderId/receive, /:orderId/results, /pending, /by-patient</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span></td></tr>
                        <tr><td class="route">labAnalyzers.js</td><td>/api/lab-analyzers</td><td class="controller">labAnalyzerController</td><td class="endpoint">/, /:id, /:id/status, /:id/calibrate, /lis-messages</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span></td></tr>
                        <tr><td class="route">labQC.js</td><td>/api/lab-qc</td><td class="controller">labQCController</td><td class="endpoint">/, /history, /westgard-rules, /levey-jennings</td><td><span class="method GET">GET</span> <span class="method POST">POST</span></td></tr>
                        <tr><td class="route">imaging.js</td><td>/api/imaging</td><td class="controller">imagingController</td><td class="endpoint">/orders, /orders/:id, /studies, /studies/:id, /dicom-viewer/:studyId</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span></td></tr>
                        <tr><td class="route">alerts.js</td><td>/api/alerts</td><td class="controller">alertController</td><td class="endpoint">/, /:id, /unread, /mark-read, /mark-all-read, /dismiss</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">clinicalAlerts.js</td><td>/api/clinical-alerts</td><td class="controller">clinicalAlertController</td><td class="endpoint">/, /:id, /patient/:patientId, /evaluate, /dismiss, /escalate</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span></td></tr>
                        <tr><td class="route">clinicalTrends.js</td><td>/api/clinical-trends</td><td class="controller">clinicalTrendController</td><td class="endpoint">/patient/:patientId, /iop-history, /refraction-history, /visual-acuity-history</td><td><span class="method GET">GET</span></td></tr>
                        <tr><td class="route">drugSafety.js</td><td>/api/drug-safety</td><td class="controller">drugSafetyController</td><td class="endpoint">/check-interactions, /check-allergies, /check-contraindications, /full-check</td><td><span class="method POST">POST</span></td></tr>
                        <tr><td class="route">clinicalDecisionSupport.js</td><td>/api/clinical-decision-support</td><td class="controller">clinicalDecisionSupportController</td><td class="endpoint">/evaluate, /recommendations, /alerts</td><td><span class="method POST">POST</span> <span class="method GET">GET</span></td></tr>
                        <tr><td class="route">faceRecognition.js</td><td>/api/face-recognition</td><td class="controller">faceRecognitionController</td><td class="endpoint">/enroll, /identify, /verify, /check-duplicates, /stats</td><td><span class="method POST">POST</span> <span class="method GET">GET</span></td></tr>
                        <tr><td class="route">ocrImport.js</td><td>/api/ocr-import</td><td class="controller">ocrImportController</td><td class="endpoint">/upload, /process, /review-queue, /:id/approve, /:id/reject</td><td><span class="method POST">POST</span> <span class="method GET">GET</span> <span class="method PUT">PUT</span></td></tr>
                        <tr><td class="route">repairs.js</td><td>/api/repairs</td><td class="controller">repairController</td><td class="endpoint">/, /:id, /:id/status, /pending, /by-patient</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span></td></tr>
                        <tr><td class="route">warranties.js</td><td>/api/warranties</td><td class="controller">warrantyController</td><td class="endpoint">/, /:id, /expiring-soon, /by-product</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span></td></tr>
                        <tr><td class="route">opticalShop.js</td><td>/api/optical-shop</td><td class="controller">opticalShopController</td><td class="endpoint">/orders, /orders/:id, /inventory-summary, /sales-report</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span></td></tr>
                        <tr><td class="route">fulfillmentDispatches.js</td><td>/api/fulfillment-dispatches</td><td class="controller">fulfillmentDispatchController</td><td class="endpoint">/, /:id, /:id/ship, /:id/deliver, /pending, /tracking</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span></td></tr>
                        <tr><td class="route">sync.js</td><td>/api/sync</td><td class="controller">syncController</td><td class="endpoint">/status, /push, /pull, /resolve-conflict, /queue</td><td><span class="method GET">GET</span> <span class="method POST">POST</span></td></tr>
                        <tr><td class="route">central.js</td><td>/api/central</td><td class="controller">centralDataController</td><td class="endpoint">/patients, /appointments, /visits, /stats, /sync-status</td><td><span class="method GET">GET</span> <span class="method POST">POST</span></td></tr>
                        <tr><td class="route">backup.js</td><td>/api/backup</td><td class="controller">backupController</td><td class="endpoint">/create, /restore, /list, /schedule, /status</td><td><span class="method GET">GET</span> <span class="method POST">POST</span></td></tr>
                        <tr><td class="route">audit.js</td><td>/api/audit</td><td class="controller">auditController</td><td class="endpoint">/logs, /logs/:id, /search, /export, /stats</td><td><span class="method GET">GET</span></td></tr>
                        <tr><td class="route">rolePermissions.js</td><td>/api/role-permissions</td><td class="controller">rolePermissionController</td><td class="endpoint">/, /:role, /me, /check</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span></td></tr>
                        <tr><td class="route">dashboard.js</td><td>/api/dashboard</td><td class="controller">dashboardController</td><td class="endpoint">/stats, /today-tasks, /recent-patients, /pending-actions, /revenue-trends</td><td><span class="method GET">GET</span></td></tr>
                        <tr><td class="route">health.js</td><td>/api/health</td><td class="controller">healthController</td><td class="endpoint">/, /detailed, /db, /redis</td><td><span class="method GET">GET</span></td></tr>
                        <tr><td class="route">uploads.js</td><td>/api/uploads</td><td class="controller">uploadController</td><td class="endpoint">/single, /multiple, /chunk, /:id</td><td><span class="method POST">POST</span> <span class="method GET">GET</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">templateCatalog.js</td><td>/api/template-catalog</td><td class="controller">templateCatalogController</td><td class="endpoint">/, /:id, /by-category, /search</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">consultationTemplates.js</td><td>/api/consultation-templates</td><td class="controller">consultationTemplateController</td><td class="endpoint">/, /:id, /by-specialty, /search</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">calendar.js</td><td>/api/calendar</td><td class="controller">calendarController</td><td class="endpoint">/events, /sync, /providers, /availability</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span></td></tr>
                        <tr><td class="route">surgicalConsents.js</td><td>/api/surgical-consents</td><td class="controller">surgicalConsentController</td><td class="endpoint">/, /:id, /:id/sign, /templates</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span></td></tr>
                        <tr><td class="route">surgicalSafetyChecklists.js</td><td>/api/surgical-safety-checklists</td><td class="controller">surgicalSafetyChecklistController</td><td class="endpoint">/, /:id, /:id/complete-phase, /templates</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span></td></tr>
                        <tr><td class="route">ivtVials.js</td><td>/api/ivt-vials</td><td class="controller">ivtVialController</td><td class="endpoint">/, /:id, /available, /expiring-soon, /:id/use</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span></td></tr>
                        <tr><td class="route">reagentLots.js</td><td>/api/reagent-lots</td><td class="controller">reagentLotController</td><td class="endpoint">/, /:id, /by-reagent, /expiring-soon</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span></td></tr>
                        <tr><td class="route">labConsumableInventory.js</td><td>/api/lab-consumable-inventory</td><td class="controller">labConsumableInventoryController</td><td class="endpoint">/, /:id, /low-stock, /expiring-soon</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">surgicalSupplyInventory.js</td><td>/api/surgical-supply-inventory</td><td class="controller">surgicalSupplyInventoryController</td><td class="endpoint">/, /:id, /low-stock, /by-category</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">unitConversions.js</td><td>/api/unit-conversions</td><td class="controller">unitConversionController</td><td class="endpoint">/, /:id, /convert</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                        <tr><td class="route">lis.js</td><td>/api/lis</td><td class="controller">lisIntegrationController</td><td class="endpoint">/status, /send-order, /receive-results, /messages</td><td><span class="method GET">GET</span> <span class="method POST">POST</span></td></tr>
                        <tr><td class="route">labResults.js</td><td>/api/lab-results</td><td class="controller">labResultController</td><td class="endpoint">/, /:id, /by-order, /by-patient, /verify, /release</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span></td></tr>
                        <tr><td class="route">migration.js</td><td>/api/migration</td><td class="controller">migrationController</td><td class="endpoint">/status, /start, /rollback, /logs</td><td><span class="method GET">GET</span> <span class="method POST">POST</span></td></tr>
                        <tr><td class="route">fiscalYear.js</td><td>/api/fiscal-year</td><td class="controller">fiscalYearController</td><td class="endpoint">/, /:id, /current, /close</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span></td></tr>
                        <tr><td class="route">correspondence.js</td><td>/api/correspondence</td><td class="controller">correspondenceController</td><td class="endpoint">/, /:id, /patient/:patientId, /templates, /send</td><td><span class="method GET">GET</span> <span class="method POST">POST</span> <span class="method PUT">PUT</span> <span class="method DELETE">DELETE</span></td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- MODELS SECTION -->
        <div id="models" class="section">
            <div class="search-box">
                <input type="text" id="modelSearch" placeholder="Search models, relationships..." onkeyup="filterModels(this.value)">
            </div>
            <div class="relationship-grid" id="modelGrid">
                <div class="rel-card">
                    <h4>Patient (25 refs)</h4>
                    <div class="rel-list">
                        <div class="rel-item"><span class="badge badge-ref">REF</span> homeClinic ‚Üí Clinic</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> registeredBy ‚Üí User</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> primaryProvider ‚Üí User</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> convention ‚Üí Company</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> referredBy ‚Üí Referrer</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> address {}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> insurance {}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> emergencyContact {}</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> allergies []</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> medicalHistory []</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> linkedFolders []</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> biometricData {}</div>
                    </div>
                </div>
                <div class="rel-card">
                    <h4>Visit (45 refs)</h4>
                    <div class="rel-list">
                        <div class="rel-item"><span class="badge badge-ref">REF</span> patient ‚Üí Patient</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> clinic ‚Üí Clinic</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> provider ‚Üí User</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> appointment ‚Üí Appointment</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> queueEntry ‚Üí Queue</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> vitalSigns {}</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> diagnoses []</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> acts [] ‚Üí ClinicalAct</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> labOrders [] ‚Üí LabOrder</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> imagingOrders []</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> prescriptions [] ‚Üí Prescription</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> conventionSnapshot {}</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> signedBy ‚Üí User</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> invoice ‚Üí Invoice</div>
                    </div>
                </div>
                <div class="rel-card">
                    <h4>Invoice (32 refs)</h4>
                    <div class="rel-list">
                        <div class="rel-item"><span class="badge badge-ref">REF</span> patient ‚Üí Patient</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> clinic ‚Üí Clinic</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> visit ‚Üí Visit</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> createdBy ‚Üí User</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> items [] {code, name, quantity, unitPrice, discount, total, category}</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> payments [] {amount, method, date, reference, currency, receivedBy ‚Üí User}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> conventionBilling {convention ‚Üí Company, coveragePercent, conventionAmount, patientAmount}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> taxDetails {}</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> approvedBy ‚Üí User</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> voidedBy ‚Üí User</div>
                    </div>
                </div>
                <div class="rel-card">
                    <h4>Appointment (21 refs)</h4>
                    <div class="rel-list">
                        <div class="rel-item"><span class="badge badge-ref">REF</span> patient ‚Üí Patient</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> clinic ‚Üí Clinic</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> provider ‚Üí User</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> room ‚Üí Room</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> visit ‚Üí Visit</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> createdBy ‚Üí User</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> cancelledBy ‚Üí User</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> recurringSeriesId</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> reminders []</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> notes []</div>
                    </div>
                </div>
                <div class="rel-card">
                    <h4>OphthalmologyExam (28 refs)</h4>
                    <div class="rel-list">
                        <div class="rel-item"><span class="badge badge-ref">REF</span> patient ‚Üí Patient</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> visit ‚Üí Visit</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> examiner ‚Üí User</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> clinic ‚Üí Clinic</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> visualAcuity {OD:{}, OS:{}}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> refraction {OD:{}, OS:{}}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> autorefraction {}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> keratometry {}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> tonometry {}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> pachymetry {}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> biometry {}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> slitLamp {}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> fundoscopy {}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> gonioscopy {}</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> diagnoses []</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> deviceMeasurements []</div>
                    </div>
                </div>
                <div class="rel-card">
                    <h4>Prescription (18 refs)</h4>
                    <div class="rel-list">
                        <div class="rel-item"><span class="badge badge-ref">REF</span> patient ‚Üí Patient</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> visit ‚Üí Visit</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> prescribedBy ‚Üí User</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> clinic ‚Üí Clinic</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> ophthalmologyExam ‚Üí OphthalmologyExam</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> medications [] {drug, dosage, frequency, duration, quantity}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> opticalRx {OD:{}, OS:{}, add, pd}</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> dispensedBy ‚Üí User</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> verifiedBy ‚Üí User</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> refillHistory []</div>
                    </div>
                </div>
                <div class="rel-card">
                    <h4>GlassesOrder (35 refs)</h4>
                    <div class="rel-list">
                        <div class="rel-item"><span class="badge badge-ref">REF</span> patient ‚Üí Patient</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> clinic ‚Üí Clinic</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> prescription ‚Üí Prescription</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> ophthalmologyExam ‚Üí OphthalmologyExam</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> frame ‚Üí FrameInventory</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> invoice ‚Üí Invoice</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> lensOD {}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> lensOS {}</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> contactLenses [] ‚Üí ContactLensInventory</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> qcData {}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> deliveryData {}</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> statusHistory []</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> reservedBy ‚Üí User</div>
                    </div>
                </div>
                <div class="rel-card">
                    <h4>ConsultationSession (12 refs)</h4>
                    <div class="rel-list">
                        <div class="rel-item"><span class="badge badge-ref">REF</span> patient ‚Üí Patient</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> doctor ‚Üí User</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> clinic ‚Üí Clinic</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> visit ‚Üí Visit</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> chiefComplaint {}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> vitalSigns {}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> examination {}</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> diagnoses []</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> treatments []</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> lastSavedBy ‚Üí User</div>
                    </div>
                </div>
                <div class="rel-card">
                    <h4>IVTInjection (15 refs)</h4>
                    <div class="rel-list">
                        <div class="rel-item"><span class="badge badge-ref">REF</span> patient ‚Üí Patient</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> clinic ‚Üí Clinic</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> visit ‚Üí Visit</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> performedBy ‚Üí User</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> vial ‚Üí IVTVial</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> medication {}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> preInjection {iop, va}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> postInjection {iop, va}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> complications {}</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> protocol ‚Üí TreatmentProtocol</div>
                    </div>
                </div>
                <div class="rel-card">
                    <h4>LabOrder (14 refs)</h4>
                    <div class="rel-list">
                        <div class="rel-item"><span class="badge badge-ref">REF</span> patient ‚Üí Patient</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> visit ‚Üí Visit</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> orderedBy ‚Üí User</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> clinic ‚Üí Clinic</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> tests [] ‚Üí LaboratoryTemplate</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> results [] ‚Üí LabResult</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> specimen {}</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> collectedBy ‚Üí User</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> verifiedBy ‚Üí User</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> analyzer ‚Üí LabAnalyzer</div>
                    </div>
                </div>
                <div class="rel-card">
                    <h4>PharmacyInventory (10 refs)</h4>
                    <div class="rel-list">
                        <div class="rel-item"><span class="badge badge-ref">REF</span> clinic ‚Üí Clinic</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> supplier ‚Üí Company</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> batches [] {lotNumber, expiryDate, quantity}</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> transactions []</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> reorderPoint {}</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> lastUpdatedBy ‚Üí User</div>
                    </div>
                </div>
                <div class="rel-card">
                    <h4>FrameInventory (12 refs)</h4>
                    <div class="rel-list">
                        <div class="rel-item"><span class="badge badge-ref">REF</span> clinic ‚Üí Clinic</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> supplier ‚Üí Company</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> dimensions {}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> pricing {}</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> images []</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> reservedFor ‚Üí GlassesOrder</div>
                    </div>
                </div>
                <div class="rel-card">
                    <h4>ContactLensInventory (10 refs)</h4>
                    <div class="rel-list">
                        <div class="rel-item"><span class="badge badge-ref">REF</span> clinic ‚Üí Clinic</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> supplier ‚Üí Company</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> batches [] {lotNumber, expiryDate, quantity} FEFO</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> parameters {}</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> reservedFor ‚Üí GlassesOrder</div>
                    </div>
                </div>
                <div class="rel-card">
                    <h4>SurgeryCase (20 refs)</h4>
                    <div class="rel-list">
                        <div class="rel-item"><span class="badge badge-ref">REF</span> patient ‚Üí Patient</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> clinic ‚Üí Clinic</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> surgeon ‚Üí User</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> anesthesiologist ‚Üí User</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> room ‚Üí Room</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> consent ‚Üí SurgicalConsent</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> checklist ‚Üí SurgicalSafetyChecklist</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> report ‚Üí SurgeryReport</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> supplies [] ‚Üí SurgicalSupplyInventory</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> iolDetails {}</div>
                    </div>
                </div>
                <div class="rel-card">
                    <h4>Document (15 refs)</h4>
                    <div class="rel-list">
                        <div class="rel-item"><span class="badge badge-ref">REF</span> patient ‚Üí Patient</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> visit ‚Üí Visit</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> clinic ‚Üí Clinic</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> uploadedBy ‚Üí User</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> versions []</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> shares []</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> signature {}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> ocrData {}</div>
                    </div>
                </div>
                <div class="rel-card">
                    <h4>Company (8 refs)</h4>
                    <div class="rel-list">
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> address {}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> contact {}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> conventionRules {coveragePercent, maxAmount, requiresApproval}</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> feeSchedules [] ‚Üí ConventionFeeSchedule</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> createdBy ‚Üí User</div>
                    </div>
                </div>
                <div class="rel-card">
                    <h4>User (16 refs)</h4>
                    <div class="rel-list">
                        <div class="rel-item"><span class="badge badge-ref">REF</span> primaryClinic ‚Üí Clinic</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> clinics [] ‚Üí Clinic</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> profile {}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> signature {}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> availability {}</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> specialties []</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> permissions []</div>
                    </div>
                </div>
                <div class="rel-card">
                    <h4>Clinic (10 refs)</h4>
                    <div class="rel-list">
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> address {}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> contact {}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> settings {}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> syncConfig {}</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> rooms [] ‚Üí Room</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> services []</div>
                    </div>
                </div>
                <div class="rel-card">
                    <h4>Approval (12 refs)</h4>
                    <div class="rel-list">
                        <div class="rel-item"><span class="badge badge-ref">REF</span> clinic ‚Üí Clinic</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> requestedBy ‚Üí User</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> approvedBy ‚Üí User</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> targetDocument (refPath)</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> originalData {}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> requestedChanges {}</div>
                        <div class="rel-item"><span class="badge badge-array">ARRAY</span> history []</div>
                    </div>
                </div>
                <div class="rel-card">
                    <h4>AuditLog (8 refs)</h4>
                    <div class="rel-list">
                        <div class="rel-item"><span class="badge badge-ref">REF</span> user ‚Üí User</div>
                        <div class="rel-item"><span class="badge badge-ref">REF</span> clinic ‚Üí Clinic</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> changes {before, after}</div>
                        <div class="rel-item"><span class="badge badge-embed">EMBED</span> metadata {}</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SERVICES SECTION -->
        <div id="services" class="section">
            <div class="search-box">
                <input type="text" id="serviceSearch" placeholder="Search services, endpoints, functions..." onkeyup="filterTable('serviceTable', this.value)">
            </div>
            <div class="matrix-container">
                <table id="serviceTable">
                    <thead>
                        <tr>
                            <th>Frontend Service</th>
                            <th>Key Functions</th>
                            <th>API Endpoints</th>
                            <th>Redux Actions</th>
                            <th>Offline Support</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td class="service">patientService.js</td><td>getPatients, getPatient, createPatient, updatePatient, searchPatients, advancedSearch, checkDuplicates, mergePatients, getTimeline, getCompleteProfile</td><td class="endpoint">/patients/*, /patients/:id/*, /visits/timeline/:id</td><td>-</td><td>‚úÖ Offline-First</td></tr>
                        <tr><td class="service">appointmentService.js</td><td>getAppointments, createAppointment, checkInAppointment, rescheduleAppointment, getAvailableSlots, getCalendarView, createRecurring</td><td class="endpoint">/appointments/*, /appointments/:id/*</td><td>-</td><td>‚úÖ Offline-First</td></tr>
                        <tr><td class="service">visitService.js</td><td>getVisits, createVisit, startVisit, completeVisit, signVisit, addAct, addVitalSigns, addDiagnosis, generateSummary</td><td class="endpoint">/visits/*, /visits/:visitId/*</td><td>visitCreated, visitUpdated, visitCompleted, actAdded</td><td>‚ùå</td></tr>
                        <tr><td class="service">queueService.js</td><td>getCurrentQueue, checkIn, updateStatus, callNext, callPatient, getStats, getDisplayBoardData</td><td class="endpoint">/queue/*, /queue/:id/*</td><td>queueCheckIn, queueStatusUpdate, patientCalled</td><td>‚úÖ Offline-First</td></tr>
                        <tr><td class="service">prescriptionService.js</td><td>getPrescriptions, createPrescription, createOpticalPrescription, createDrugPrescription, checkDrugInteractions, dispensePrescription, sendToPharmacy, requestPriorAuthorization</td><td class="endpoint">/prescriptions/*, /pharmacy/search</td><td>-</td><td>‚ö†Ô∏è Partial (drugs require online)</td></tr>
                        <tr><td class="service">billingService.js</td><td>getInvoices, createInvoice, processPayment, refundPayment, submitInsuranceClaim, processMultiCurrencyPayment, getExchangeRates</td><td class="endpoint">/invoices/*, /billing/*</td><td>paymentProcessed, refund</td><td>‚ùå</td></tr>
                        <tr><td class="service">ophthalmologyService.js</td><td>getExams, createExam, saveRefractionData, saveTonometryData, saveOCTResults, calculateIOLPower, getProgressionAnalysis</td><td class="endpoint">/ophthalmology/*</td><td>examCreated, examUpdated, examCompleted</td><td>‚ùå</td></tr>
                        <tr><td class="service">laboratoryService.js</td><td>orderTests, updateTestResults, getPendingTests, getWorklist, markCollected, validateResult, getPatientTrends</td><td class="endpoint">/laboratory/*, /lab-orders/*</td><td>labOrderCreated, specimenCollected</td><td>‚ùå</td></tr>
                        <tr><td class="service">glassesOrderService.js</td><td>createOrder, updateStatus, reserveInventory, fulfillInventory, performQC, recordDelivery, generateInvoice</td><td class="endpoint">/glasses-orders/*</td><td>orderCreated, inventoryReserved, orderDelivered</td><td>‚ùå</td></tr>
                        <tr><td class="service">consultationSessionService.js</td><td>getActiveSession, createSession, updateSession, completeSession, abandonSession</td><td class="endpoint">/consultation-sessions/*</td><td>sessionCreated, sessionCompleted</td><td>‚ùå</td></tr>
                        <tr><td class="service">documentService.js</td><td>uploadDocument, getDocuments, downloadDocument, transcribeAudio, ocrScanDocument, signDocument, mergeDocuments</td><td class="endpoint">/documents/*</td><td>documentUploaded, documentSigned</td><td>‚ùå</td></tr>
                        <tr><td class="service">deviceService.js</td><td>getDevices, discoverDevices, syncDevice, getMeasurements, startAutoSync, getSMBStats</td><td class="endpoint">/devices/*</td><td>-</td><td>‚ùå</td></tr>
                        <tr><td class="service">pharmacyInventoryService.js</td><td>getInventory, updateStock, dispense, getExpiringItems, getLowStock, adjustStock</td><td class="endpoint">/pharmacy/*</td><td>-</td><td>‚ùå</td></tr>
                        <tr><td class="service">frameInventoryService.js</td><td>getFrames, searchFrames, updateStock, reserve, release</td><td class="endpoint">/frame-inventory/*</td><td>-</td><td>‚ùå</td></tr>
                        <tr><td class="service">contactLensInventoryService.js</td><td>getLenses, searchLenses, pickFEFO, reserve, release</td><td class="endpoint">/contact-lens-inventory/*</td><td>-</td><td>‚ùå</td></tr>
                        <tr><td class="service">authService.js</td><td>login, register, logout, getCurrentUser, updatePassword, forgotPassword, resetPassword</td><td class="endpoint">/auth/*</td><td>-</td><td>‚ùå</td></tr>
                        <tr><td class="service">clinicService.js</td><td>getClinics, getMyClinic, switchClinic</td><td class="endpoint">/clinics/*</td><td>-</td><td>‚ùå</td></tr>
                        <tr><td class="service">auditService.js</td><td>getLogs, searchLogs, exportLogs</td><td class="endpoint">/audit/*</td><td>-</td><td>‚ùå</td></tr>
                        <tr><td class="service">approvalService.js</td><td>getApprovals, createApproval, approve, reject, getMyRequests</td><td class="endpoint">/approvals/*</td><td>-</td><td>‚ùå</td></tr>
                        <tr><td class="service">feeScheduleService.js</td><td>getFeeSchedules, getByConvention, search</td><td class="endpoint">/fee-schedules/*</td><td>-</td><td>‚ùå</td></tr>
                        <tr><td class="service">ivtVialService.js</td><td>getVials, getAvailable, useVial</td><td class="endpoint">/ivt-vials/*</td><td>-</td><td>‚ùå</td></tr>
                        <tr><td class="service">surgeryService.js</td><td>getCases, createCase, updateStatus, getChecklists, getConsents</td><td class="endpoint">/surgery/*</td><td>-</td><td>‚ùå</td></tr>
                        <tr><td class="service">crossClinicInventoryService.js</td><td>getSummary, getByClinic, getTransfers, createTransfer</td><td class="endpoint">/cross-clinic-inventory/*</td><td>-</td><td>‚ùå</td></tr>
                        <tr><td class="service">websocketService.js</td><td>connect, disconnect, subscribe, emit, on</td><td class="endpoint">WebSocket: ws://localhost:5001</td><td>Real-time events</td><td>‚ùå</td></tr>
                        <tr><td class="service">syncService.js</td><td>getStatus, pushChanges, pullChanges, resolveConflict</td><td class="endpoint">/sync/*</td><td>-</td><td>‚úÖ Core offline sync</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- REDUX SECTION -->
        <div id="redux" class="section">
            <h3 style="color:#9b59b6;margin-bottom:15px;">Redux Store Structure (10 Slices)</h3>

            <div class="redux-slice">
                <div class="slice-name">authSlice</div>
                <div class="state-tree">{
  user: { _id, firstName, lastName, email, role, permissions[], clinics[], primaryClinic },
  token: string,
  refreshToken: string,
  isAuthenticated: boolean,
  loading: boolean,
  error: string | null,
  rolePermissions: { role, permissions[], moduleAccess{} }
}

Actions: login, logout, refreshToken, updateUser, setPermissions, clearError</div>
            </div>

            <div class="redux-slice">
                <div class="slice-name">uiSlice</div>
                <div class="state-tree">{
  sidebarOpen: boolean,
  sidebarCollapsed: boolean,
  currentTheme: 'light' | 'dark',
  notifications: [{ id, type, message, timestamp, read }],
  modals: { [modalId]: { isOpen, data } },
  loading: { [key]: boolean },
  errors: { [key]: string },
  breadcrumbs: [{ label, path }],
  searchQuery: string,
  tableSettings: { [tableId]: { pageSize, sortBy, sortOrder, filters } }
}

Actions: toggleSidebar, setTheme, addNotification, dismissNotification, openModal, closeModal,
         setLoading, setError, clearError, setBreadcrumbs, setSearchQuery, updateTableSettings</div>
            </div>

            <div class="redux-slice">
                <div class="slice-name">patientSlice</div>
                <div class="state-tree">{
  patients: { byId: { [id]: Patient }, allIds: [] },
  currentPatient: Patient | null,
  searchResults: Patient[],
  recentPatients: Patient[],
  loading: boolean,
  error: string | null,
  pagination: { page, limit, total, totalPages },
  filters: { search, status, clinic, dateRange }
}

Actions: fetchPatients, fetchPatient, createPatient, updatePatient, deletePatient,
         searchPatients, setCurrentPatient, clearCurrentPatient, setFilters, resetFilters</div>
            </div>

            <div class="redux-slice">
                <div class="slice-name">appointmentSlice</div>
                <div class="state-tree">{
  appointments: { byId: {}, allIds: [] },
  todayAppointments: Appointment[],
  upcomingAppointments: Appointment[],
  calendarView: { start, end, appointments: [] },
  availableSlots: TimeSlot[],
  loading: boolean,
  error: string | null,
  filters: { date, provider, status, type }
}

Actions: fetchAppointments, fetchTodayAppointments, createAppointment, updateAppointment,
         checkIn, complete, cancel, reschedule, fetchAvailableSlots, setCalendarRange</div>
            </div>

            <div class="redux-slice">
                <div class="slice-name">visitSlice</div>
                <div class="state-tree">{
  visits: { byId: {}, allIds: [] },
  currentVisit: Visit | null,
  activeVisits: Visit[],
  todayVisits: Visit[],
  loading: boolean,
  error: string | null
}

Actions: fetchVisits, fetchVisit, createVisit, updateVisit, startVisit, completeVisit,
         signVisit, lockVisit, addAct, removeAct, addVitalSigns, addDiagnosis</div>
            </div>

            <div class="redux-slice">
                <div class="slice-name">queueSlice</div>
                <div class="state-tree">{
  queue: QueueEntry[],
  stats: { waiting, inProgress, completed, avgWaitTime },
  displayBoard: { calling: [], waiting: [], inProgress: [] },
  loading: boolean,
  error: string | null,
  filters: { department, status, priority }
}

Actions: fetchQueue, checkIn, updateStatus, callPatient, removeFromQueue,
         fetchStats, setFilters, refreshQueue

WebSocket Events: 'queue:update', 'queue:patient-called', 'queue:check-in'</div>
            </div>

            <div class="redux-slice">
                <div class="slice-name">billingSlice</div>
                <div class="state-tree">{
  invoices: { byId: {}, allIds: [] },
  currentInvoice: Invoice | null,
  payments: Payment[],
  claims: InsuranceClaim[],
  statistics: { revenue, outstanding, collected },
  exchangeRates: { CDF, USD, EUR, XAF },
  loading: boolean,
  error: string | null
}

Actions: fetchInvoices, fetchInvoice, createInvoice, processPayment, refundPayment,
         submitClaim, updateClaimStatus, fetchExchangeRates, applyDiscount, writeOff</div>
            </div>

            <div class="redux-slice">
                <div class="slice-name">prescriptionSlice</div>
                <div class="state-tree">{
  prescriptions: { byId: {}, allIds: [] },
  currentPrescription: Prescription | null,
  templates: PrescriptionTemplate[],
  drugInteractions: Interaction[],
  loading: boolean,
  error: string | null,
  filters: { type, status, patient }
}

Actions: fetchPrescriptions, createPrescription, updatePrescription, dispensePrescription,
         checkInteractions, applyTemplate, signPrescription, cancelPrescription</div>
            </div>

            <div class="redux-slice">
                <div class="slice-name">documentSlice</div>
                <div class="state-tree">{
  documents: { byId: {}, allIds: [] },
  currentDocument: Document | null,
  categories: string[],
  uploadProgress: { [fileId]: number },
  loading: boolean,
  error: string | null
}

Actions: fetchDocuments, uploadDocument, updateDocument, deleteDocument,
         downloadDocument, signDocument, shareDocument, setUploadProgress</div>
            </div>

            <div class="redux-slice">
                <div class="slice-name">notificationSlice</div>
                <div class="state-tree">{
  notifications: Notification[],
  unreadCount: number,
  loading: boolean,
  error: string | null
}

Actions: fetchNotifications, markRead, markAllRead, dismiss, addNotification

WebSocket Events: 'notification:new', 'notification:update'</div>
            </div>
        </div>

        <!-- PAGES SECTION -->
        <div id="pages" class="section">
            <div class="search-box">
                <input type="text" id="pageSearch" placeholder="Search pages, routes, services..." onkeyup="filterTable('pageTable', this.value)">
            </div>
            <div class="matrix-container">
                <table id="pageTable">
                    <thead>
                        <tr>
                            <th>Page Component</th>
                            <th>Route</th>
                            <th>Services Used</th>
                            <th>Redux Slices</th>
                            <th>Key Features</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>Dashboard.jsx</td><td>/dashboard</td><td>dashboardService, appointmentService, patientService</td><td>auth, ui</td><td>Stats widgets, today's appointments, recent patients, pending actions</td></tr>
                        <tr><td>Patients.jsx</td><td>/patients</td><td>patientService</td><td>patient, ui</td><td>Patient list, search, filtering, pagination</td></tr>
                        <tr><td>PatientDetail/index.jsx</td><td>/patients/:id</td><td>patientService, visitService, prescriptionService, appointmentService, billingService</td><td>patient, visit, prescription, billing</td><td>Full patient profile, timeline, tabs for visits/prescriptions/billing</td></tr>
                        <tr><td>PatientEdit.jsx</td><td>/patients/:id/edit</td><td>patientService, companyService</td><td>patient</td><td>Edit patient demographics, insurance, convention</td></tr>
                        <tr><td>Queue.jsx</td><td>/queue</td><td>queueService, websocketService</td><td>queue, ui</td><td>Real-time queue display, check-in, call patient, status updates</td></tr>
                        <tr><td>QueueDisplayBoard.jsx</td><td>/queue/display</td><td>queueService, websocketService</td><td>queue</td><td>TV display mode, calling announcements</td></tr>
                        <tr><td>Appointments.jsx</td><td>/appointments</td><td>appointmentService</td><td>appointment</td><td>Calendar view, booking, rescheduling</td></tr>
                        <tr><td>Invoicing.jsx</td><td>/invoicing</td><td>billingService, patientService</td><td>billing</td><td>Invoice list, payments, multi-currency</td></tr>
                        <tr><td>Financial/index.jsx</td><td>/financial</td><td>billingService</td><td>billing</td><td>Revenue reports, aging, statistics</td></tr>
                        <tr><td>Prescriptions.jsx</td><td>/prescriptions</td><td>prescriptionService</td><td>prescription</td><td>Prescription list, filtering by type</td></tr>
                        <tr><td>NewConsultation.jsx</td><td>/ophthalmology/consultation/:patientId</td><td>ophthalmologyService, consultationSessionService, visitService, prescriptionService</td><td>visit</td><td>Multi-step wizard: chief complaint ‚Üí VA ‚Üí exam ‚Üí procedures ‚Üí prescription ‚Üí summary</td></tr>
                        <tr><td>GlassesOrder.jsx</td><td>/ophthalmology/glasses-order/:patientId</td><td>glassesOrderService, frameInventoryService, contactLensInventoryService</td><td>-</td><td>Frame selection, lens config, inventory reservation</td></tr>
                        <tr><td>IVTDashboard/index.jsx</td><td>/ivt</td><td>ivtService, ivtVialService</td><td>-</td><td>IVT scheduling, vial management, compliance tracking</td></tr>
                        <tr><td>IVTDetail.jsx</td><td>/ivt/:id</td><td>ivtService</td><td>-</td><td>Injection details, pre/post measurements</td></tr>
                        <tr><td>IVTInjectionForm.jsx</td><td>/ivt/new/:patientId</td><td>ivtService, ivtVialService, patientService</td><td>-</td><td>Injection recording, vial selection, protocol</td></tr>
                        <tr><td>Laboratory/index.jsx</td><td>/laboratory</td><td>laboratoryService, labOrderService</td><td>-</td><td>Lab worklist, pending tests, results entry</td></tr>
                        <tr><td>LabTechWorklist.jsx</td><td>/laboratory/worklist</td><td>laboratoryService</td><td>-</td><td>Specimen collection, processing, result entry</td></tr>
                        <tr><td>LabCheckIn.jsx</td><td>/laboratory/checkin</td><td>laboratoryService</td><td>-</td><td>Specimen registration, barcode scanning</td></tr>
                        <tr><td>PharmacyDashboard/index.jsx</td><td>/pharmacy</td><td>pharmacyInventoryService, prescriptionService</td><td>-</td><td>Dispensing queue, inventory levels, expiry alerts</td></tr>
                        <tr><td>DeviceManager.jsx</td><td>/devices</td><td>deviceService</td><td>-</td><td>Device list, status, sync controls</td></tr>
                        <tr><td>DeviceDetail.jsx</td><td>/devices/:id</td><td>deviceService</td><td>-</td><td>Device config, measurements, sync history</td></tr>
                        <tr><td>DeviceImport.jsx</td><td>/devices/:deviceId/import</td><td>deviceService, patientService</td><td>-</td><td>Import measurements, patient matching</td></tr>
                        <tr><td>NetworkDiscovery.jsx</td><td>/devices/discovery</td><td>deviceService</td><td>-</td><td>SMB share discovery, device auto-detection</td></tr>
                        <tr><td>Imaging.jsx</td><td>/imaging</td><td>imagingService</td><td>-</td><td>Imaging orders, study viewer</td></tr>
                        <tr><td>OrthopticExams.jsx</td><td>/orthoptic</td><td>orthopticService</td><td>-</td><td>Orthoptic exam list, pediatric assessments</td></tr>
                        <tr><td>Surgery/index.jsx</td><td>/surgery</td><td>surgeryService</td><td>-</td><td>Surgery schedule, case management</td></tr>
                        <tr><td>FrameInventory/index.jsx</td><td>/inventory/frames</td><td>frameInventoryService</td><td>-</td><td>Frame stock, search, reservations</td></tr>
                        <tr><td>ContactLensInventory/index.jsx</td><td>/inventory/contact-lenses</td><td>contactLensInventoryService</td><td>-</td><td>Contact lens stock, FEFO batches</td></tr>
                        <tr><td>OpticalLensInventory/index.jsx</td><td>/inventory/optical-lenses</td><td>opticalLensInventoryService</td><td>-</td><td>Optical lens stock</td></tr>
                        <tr><td>ReagentInventory/index.jsx</td><td>/inventory/reagents</td><td>reagentInventoryService</td><td>-</td><td>Lab reagent stock, cold chain alerts</td></tr>
                        <tr><td>CrossClinicInventory/index.jsx</td><td>/inventory/cross-clinic</td><td>crossClinicInventoryService</td><td>-</td><td>Multi-clinic inventory view, transfers</td></tr>
                        <tr><td>PurchaseOrders/index.jsx</td><td>/purchase-orders</td><td>purchaseOrderService</td><td>-</td><td>PO creation, approval, receiving</td></tr>
                        <tr><td>StockReconciliation/index.jsx</td><td>/inventory/reconciliation</td><td>stockReconciliationService</td><td>-</td><td>Physical count, discrepancy resolution</td></tr>
                        <tr><td>Approvals/index.jsx</td><td>/approvals</td><td>approvalService</td><td>-</td><td>Pending approvals, approve/reject workflow</td></tr>
                        <tr><td>Companies/index.jsx</td><td>/companies</td><td>companyService</td><td>-</td><td>Convention companies, fee schedules</td></tr>
                        <tr><td>Settings.jsx</td><td>/settings</td><td>authService, clinicService, rolePermissionService</td><td>auth</td><td>User settings, clinic config, roles</td></tr>
                        <tr><td>UserManagement.jsx</td><td>/users</td><td>userService, rolePermissionService</td><td>-</td><td>User CRUD, role assignment</td></tr>
                        <tr><td>AuditTrail.jsx</td><td>/audit</td><td>auditService</td><td>-</td><td>Audit log viewer, search, export</td></tr>
                        <tr><td>AnalyticsDashboard.jsx</td><td>/analytics</td><td>billingService, appointmentService, visitService</td><td>-</td><td>Charts, trends, KPIs</td></tr>
                        <tr><td>BackupManagement.jsx</td><td>/backup</td><td>backupService</td><td>-</td><td>Backup/restore, scheduling</td></tr>
                        <tr><td>TemplateManager.jsx</td><td>/templates</td><td>templateCatalogService, consultationTemplateService</td><td>-</td><td>Template CRUD, categories</td></tr>
                        <tr><td>DocumentGeneration.jsx</td><td>/documents/generate</td><td>documentService</td><td>document</td><td>Document generation, templates</td></tr>
                        <tr><td>OCRReviewQueue.jsx</td><td>/ocr/review</td><td>ocrImportService</td><td>-</td><td>OCR result review, data extraction approval</td></tr>
                        <tr><td>ImportWizard.jsx</td><td>/import</td><td>patientService, legacyService</td><td>-</td><td>Legacy data import, mapping</td></tr>
                        <tr><td>Login.jsx</td><td>/login</td><td>authService</td><td>auth</td><td>Login form, forgot password</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- WEBSOCKET SECTION -->
        <div id="websocket" class="section">
            <h3 style="color:#e74c3c;margin-bottom:15px;">WebSocket Real-Time Events</h3>

            <div class="category-header">Queue Events</div>
            <div class="ws-event"><strong>queue:update</strong> - Queue state changed (check-in, status update, removal)</div>
            <div class="ws-event"><strong>queue:patient-called</strong> - Patient called to room (triggers display board update)</div>
            <div class="ws-event"><strong>queue:check-in</strong> - New patient checked in</div>
            <div class="ws-event"><strong>queue:stats-update</strong> - Queue statistics updated</div>

            <div class="category-header">Billing Events</div>
            <div class="ws-event"><strong>billing:payment-received</strong> - Payment processed on invoice</div>
            <div class="ws-event"><strong>billing:invoice-created</strong> - New invoice generated</div>
            <div class="ws-event"><strong>billing:invoice-updated</strong> - Invoice modified</div>

            <div class="category-header">Clinical Events</div>
            <div class="ws-event"><strong>visit:started</strong> - Visit begun with patient</div>
            <div class="ws-event"><strong>visit:completed</strong> - Visit finished</div>
            <div class="ws-event"><strong>consultation:auto-saved</strong> - Consultation session auto-saved</div>
            <div class="ws-event"><strong>prescription:created</strong> - New prescription written</div>
            <div class="ws-event"><strong>prescription:dispensed</strong> - Prescription dispensed from pharmacy</div>

            <div class="category-header">Laboratory Events</div>
            <div class="ws-event"><strong>lab:specimen-collected</strong> - Specimen collected from patient</div>
            <div class="ws-event"><strong>lab:results-ready</strong> - Lab results completed</div>
            <div class="ws-event"><strong>lab:critical-value</strong> - Critical lab value detected (high priority)</div>

            <div class="category-header">Device Events</div>
            <div class="ws-event"><strong>device:measurement-received</strong> - New measurement from device</div>
            <div class="ws-event"><strong>device:sync-complete</strong> - Device sync finished</div>
            <div class="ws-event"><strong>device:status-change</strong> - Device online/offline status changed</div>

            <div class="category-header">Inventory Events</div>
            <div class="ws-event"><strong>inventory:low-stock</strong> - Item below reorder point</div>
            <div class="ws-event"><strong>inventory:expiring-soon</strong> - Item approaching expiry</div>
            <div class="ws-event"><strong>inventory:reserved</strong> - Stock reserved for order</div>
            <div class="ws-event"><strong>inventory:transfer-requested</strong> - Cross-clinic transfer requested</div>

            <div class="category-header">Alert Events</div>
            <div class="ws-event"><strong>alert:clinical</strong> - Clinical alert triggered (drug interaction, allergy, etc.)</div>
            <div class="ws-event"><strong>alert:system</strong> - System alert (backup, sync, etc.)</div>
            <div class="ws-event"><strong>notification:new</strong> - New notification for user</div>

            <div class="category-header">Sync Events (Multi-Clinic)</div>
            <div class="ws-event"><strong>sync:started</strong> - Data sync began</div>
            <div class="ws-event"><strong>sync:progress</strong> - Sync progress update</div>
            <div class="ws-event"><strong>sync:completed</strong> - Sync finished successfully</div>
            <div class="ws-event"><strong>sync:conflict</strong> - Data conflict detected requiring resolution</div>
        </div>

        <!-- DATA FLOW SECTION -->
        <div id="dataflow" class="section">
            <h3 style="color:#1abc9c;margin-bottom:15px;">Critical Data Flows</h3>

            <div class="flow-diagram">
                <h4 style="color:#3498db;margin-bottom:10px;">Patient Check-In ‚Üí Visit ‚Üí Invoice Flow</h4>
                <div class="flow-row">
                    <div class="flow-box" style="background:#27ae60;">Patient Arrives</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#3498db;">Queue Check-In</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#9b59b6;">Convention Snapshot Captured</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#e67e22;">Visit Created</div>
                </div>
                <div class="flow-row">
                    <div class="flow-box" style="background:#e67e22;">Visit In Progress</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#16a085;">Acts/Diagnoses Added</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#8e44ad;">Visit Completed</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#c0392b;">Invoice Generated</div>
                </div>
                <div class="flow-row">
                    <div class="flow-box" style="background:#c0392b;">Invoice</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#2980b9;">Convention Split Applied</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#27ae60;">Payment Received</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#1abc9c;">Receipt Generated</div>
                </div>
            </div>

            <div class="flow-diagram">
                <h4 style="color:#3498db;margin-bottom:10px;">Ophthalmology Consultation Flow</h4>
                <div class="flow-row">
                    <div class="flow-box" style="background:#3498db;">Start Session</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#9b59b6;">Chief Complaint</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#e67e22;">Visual Acuity</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#16a085;">Auto-Refraction</div>
                </div>
                <div class="flow-row">
                    <div class="flow-box" style="background:#16a085;">Exam Data</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#e74c3c;">Tonometry/Slit Lamp</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#8e44ad;">Device Import (OCT, VF)</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#2980b9;">Procedures</div>
                </div>
                <div class="flow-row">
                    <div class="flow-box" style="background:#2980b9;">Procedures</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#27ae60;">Prescription</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#c0392b;">Summary</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#1abc9c;">Complete Session ‚Üí Visit</div>
                </div>
            </div>

            <div class="flow-diagram">
                <h4 style="color:#3498db;margin-bottom:10px;">Glasses Order ‚Üí Inventory ‚Üí Delivery Flow</h4>
                <div class="flow-row">
                    <div class="flow-box" style="background:#3498db;">Prescription</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#9b59b6;">Frame Selection</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#e67e22;">Lens Configuration</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#c0392b;">Inventory Reserved</div>
                </div>
                <div class="flow-row">
                    <div class="flow-box" style="background:#c0392b;">Reserved</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#16a085;">Order Placed</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#8e44ad;">Lab Processing</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#2980b9;">Received from Lab</div>
                </div>
                <div class="flow-row">
                    <div class="flow-box" style="background:#2980b9;">Received</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#e74c3c;">QC Inspection</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#27ae60;">Ready for Pickup</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#1abc9c;">Delivered ‚Üí Inventory Fulfilled</div>
                </div>
            </div>

            <div class="flow-diagram">
                <h4 style="color:#3498db;margin-bottom:10px;">Laboratory Order Flow</h4>
                <div class="flow-row">
                    <div class="flow-box" style="background:#3498db;">Order Created</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#9b59b6;">Specimen Collected</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#e67e22;">Barcode Generated</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#16a085;">Lab Received</div>
                </div>
                <div class="flow-row">
                    <div class="flow-box" style="background:#16a085;">In Lab</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#8e44ad;">Analyzer Processing</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#e74c3c;">Results Entered</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#2980b9;">Validation (Westgard QC)</div>
                </div>
                <div class="flow-row">
                    <div class="flow-box" style="background:#2980b9;">Validated</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#27ae60;">Released</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#1abc9c;">Critical Alert (if needed)</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#c0392b;">Report Generated</div>
                </div>
            </div>

            <div class="flow-diagram">
                <h4 style="color:#3498db;margin-bottom:10px;">Multi-Clinic Sync Flow</h4>
                <div class="flow-row">
                    <div class="flow-box" style="background:#3498db;">Local Change</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#9b59b6;">Sync Queue</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#e67e22;">Central Server</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#16a085;">Conflict Check</div>
                </div>
                <div class="flow-row">
                    <div class="flow-box" style="background:#16a085;">No Conflict</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#27ae60;">Propagate to Clinics</div>
                    <span class="flow-arrow">‚ü∑</span>
                    <div class="flow-box" style="background:#e74c3c;">Conflict?</div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-box" style="background:#c0392b;">Manual Resolution</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
            event.target.classList.add('active');
        }

        function filterTable(tableId, query) {
            const table = document.getElementById(tableId);
            const rows = table.querySelectorAll('tbody tr');
            const q = query.toLowerCase();
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(q) ? '' : 'none';
            });
        }

        function filterModels(query) {
            const cards = document.querySelectorAll('.rel-card');
            const q = query.toLowerCase();
            cards.forEach(card => {
                const text = card.textContent.toLowerCase();
                card.style.display = text.includes(q) ? '' : 'none';
            });
        }
    </script>
</body>
</html>
